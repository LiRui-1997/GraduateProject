{"ast":null,"code":"import _classCallCheck from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import axios from'axios';import*as React from'react';import{PersistGate}from'redux-persist/lib/integration/react';import{Provider}from'react-redux';import{Router,withRouter}from'react-router-dom';import*as Visibility from'visibilityjs';import{GlobalActions}from'../actions/GlobalActions';import NavigationContainer from'../components/Nav/Navigation';import{store,persistor}from'../store/ConfigStore';import AuthenticationControllerContainer from'./AuthenticationController';import history from'./History';import InitializingScreen from'./InitializingScreen';import StartupInitializer from'./StartupInitializer';import LoginPageContainer from'../pages/Login/LoginPage';import{LoginActions}from'../actions/LoginActions';import'tippy.js/dist/tippy.css';import'tippy.js/dist/themes/light-border.css';import'react-datepicker/dist/react-datepicker.css';Visibility.change(function(_e,state){// There are 3 states, visible, hidden and prerender, consider prerender as hidden.\n// https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState\nif(state==='visible'){store.dispatch(GlobalActions.setPageVisibilityVisible());}else{store.dispatch(GlobalActions.setPageVisibilityHidden());}});if(Visibility.hidden()){store.dispatch(GlobalActions.setPageVisibilityHidden());}else{store.dispatch(GlobalActions.setPageVisibilityVisible());}var getIsLoadingState=function getIsLoadingState(){var state=store.getState();return state&&state.globalState.loadingCounter>0;};var decrementLoadingCounter=function decrementLoadingCounter(){if(getIsLoadingState()){store.dispatch(GlobalActions.decrementLoadingCounter());}};// intercept all Axios requests and dispatch the INCREMENT_LOADING_COUNTER Action\naxios.interceptors.request.use(function(request){// dispatch an action to turn spinner on\nstore.dispatch(GlobalActions.incrementLoadingCounter());return request;},function(error){console.log(error);return Promise.reject(error);});// intercept all Axios responses and dispatch the DECREMENT_LOADING_COUNTER Action\naxios.interceptors.response.use(function(response){decrementLoadingCounter();return response;},function(error){// The response was rejected, turn off the spinning\ndecrementLoadingCounter();if(error.response.status===401){store.dispatch(LoginActions.sessionExpired());}return Promise.reject(error);});var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.protectedArea=void 0;_this.initializationFinishedHandler=function(){_this.setState({isInitialized:true});};_this.state={isInitialized:false};var Navigator=withRouter(NavigationContainer);_this.protectedArea=/*#__PURE__*/React.createElement(Router,{history:history},/*#__PURE__*/React.createElement(Navigator,null));return _this;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Provider,{store:store},/*#__PURE__*/React.createElement(PersistGate,{loading:/*#__PURE__*/React.createElement(InitializingScreen,null),persistor:persistor},this.state.isInitialized?/*#__PURE__*/React.createElement(AuthenticationControllerContainer,{publicAreaComponent:function publicAreaComponent(isPostLoginPerforming,errorMsg){return/*#__PURE__*/React.createElement(LoginPageContainer,{isPostLoginPerforming:isPostLoginPerforming,postLoginErrorMsg:errorMsg});},protectedAreaComponent:this.protectedArea}):/*#__PURE__*/React.createElement(StartupInitializer,{onInitializationFinished:this.initializationFinishedHandler})));}}]);return App;}(React.Component);export default App;","map":null,"metadata":{},"sourceType":"module"}