{"ast":null,"code":"import _classCallCheck from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from'react';import{connect}from'react-redux';import RenderPage from'./RenderPage';import Masthead from'./Masthead/Masthead';import Menu from'./Menu';import{Page,PageHeader,PageSection,Brand}from'@patternfly/react-core';import{style}from'typestyle';import MessageCenterContainer from'../../components/MessageCenter/MessageCenter';import{kialiLogo,serverConfig}from'../../config';import UserSettingsThunkActions from'../../actions/UserSettingsThunkActions';var flexBoxColumnStyle=style({display:'flex',flexDirection:'column'});export var Navigation=/*#__PURE__*/function(_React$Component){_inherits(Navigation,_React$Component);var _super=_createSuper(Navigation);function Navigation(props){var _this;_classCallCheck(this,Navigation);_this=_super.call(this,props);_this.setControlledState=function(event){if('navCollapsed'in event){_this.props.setNavCollapsed(_this.props.navCollapsed);}};_this.isGraph=function(){return _this.props.location.pathname.startsWith('/graph');};_this.onNavToggleDesktop=function(){_this.setState({isNavOpenDesktop:!_this.state.isNavOpenDesktop});_this.props.setNavCollapsed(!_this.props.navCollapsed);};_this.onNavToggleMobile=function(){_this.setState({isNavOpenMobile:!_this.state.isNavOpenMobile});};_this.onPageResize=function(_ref){var mobileView=_ref.mobileView,windowSize=_ref.windowSize;var ismobile=mobileView;if(windowSize<1000){ismobile=true;}_this.setState({isMobileView:ismobile});};_this.state={isMobileView:false,isNavOpenDesktop:true,isNavOpenMobile:false};return _this;}_createClass(Navigation,[{key:\"goTojaeger\",value:function goTojaeger(){window.open(this.props.jaegerUrl,'_blank');}},{key:\"componentDidMount\",value:function componentDidMount(){var _serverConfig$cluster;var pageTitle=serverConfig.installationTag?serverConfig.installationTag:'Kiali';if(!!((_serverConfig$cluster=serverConfig.clusterInfo)===null||_serverConfig$cluster===void 0?void 0:_serverConfig$cluster.name)){pageTitle+=\" [\".concat(serverConfig.clusterInfo.name,\"]\");}document.title=pageTitle;}},{key:\"render\",value:function render(){var _this$state=this.state,isNavOpenDesktop=_this$state.isNavOpenDesktop,isNavOpenMobile=_this$state.isNavOpenMobile,isMobileView=_this$state.isMobileView;var Header=/*#__PURE__*/React.createElement(PageHeader,{logo:/*#__PURE__*/React.createElement(Brand,{src:kialiLogo,alt:\"Kiali Logo\"}),toolbar:/*#__PURE__*/React.createElement(Masthead,null),showNavToggle:true,onNavToggle:isMobileView?this.onNavToggleMobile:this.onNavToggleDesktop,isNavOpen:isMobileView?isNavOpenMobile:isNavOpenDesktop||!this.props.navCollapsed,role:'kiali_header'});var Sidebar=/*#__PURE__*/React.createElement(Menu,{isNavOpen:isMobileView?isNavOpenMobile:isNavOpenDesktop||!this.props.navCollapsed,location:this.props.location,jaegerUrl:this.props.jaegerUrl});return/*#__PURE__*/React.createElement(Page,{header:Header,sidebar:Sidebar,onPageResize:this.onPageResize},/*#__PURE__*/React.createElement(MessageCenterContainer,{drawerTitle:\"Message Center\"}),/*#__PURE__*/React.createElement(PageSection,{className:flexBoxColumnStyle,variant:'light'},/*#__PURE__*/React.createElement(RenderPage,{isGraph:this.isGraph()})));}}]);return Navigation;}(React.Component);Navigation.contextTypes={router:function router(){return null;}};var mapStateToProps=function mapStateToProps(state){return{navCollapsed:state.userSettings.interface.navCollapse,jaegerUrl:state.jaegerState.info&&state.jaegerState.info.url?state.jaegerState.info.url:undefined};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setNavCollapsed:function setNavCollapsed(collapse){return dispatch(UserSettingsThunkActions.setNavCollapsed(collapse));}};};var NavigationContainer=connect(mapStateToProps,mapDispatchToProps)(Navigation);export default NavigationContainer;","map":null,"metadata":{},"sourceType":"module"}