{"ast":null,"code":"import _classCallCheck from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from'react';import{Card,CardHead,CardActions,CardHeader,Button,CardBody,Accordion,AccordionToggle,AccordionItem,AccordionContent}from'@patternfly/react-core';import{CloseIcon,InfoIcon}from'@patternfly/react-icons';import{connect}from'react-redux';import{style}from'typestyle';import{MessageCenterActions}from'actions/MessageCenterActions';import AlertDrawerGroupContainer from'./AlertDrawerGroup';import{BoundingClientAwareComponent,PropertyType}from'components/BoundingClientAwareComponent/BoundingClientAwareComponent';import{KialiIcon}from'config/KialiIcon';var hideGroup=function hideGroup(group){return group.hideIfEmpty&&group.messages.length===0;};var getUnreadCount=function getUnreadCount(messages){return messages.reduce(function(count,message){return message.seen?count:count+1;},0);};var getUnreadMessageLabel=function getUnreadMessageLabel(messages){var unreadCount=getUnreadCount(messages);return unreadCount===1?'1 Unread Message':\"\".concat(getUnreadCount(messages),\" Unread Messages\");};var noNotificationsMessage=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(InfoIcon,null),\"No Messages Available\");export var AlertDrawer=/*#__PURE__*/function(_React$PureComponent){_inherits(AlertDrawer,_React$PureComponent);var _super=_createSuper(AlertDrawer);function AlertDrawer(){_classCallCheck(this,AlertDrawer);return _super.apply(this,arguments);}_createClass(AlertDrawer,[{key:\"render\",value:function render(){var _this=this;var drawer=style({position:'absolute',right:'0',width:this.props.isExpanded?'80%':'30em'});return!this.props.isHidden&&/*#__PURE__*/React.createElement(Card,{className:drawer,hidden:this.props.isHidden},/*#__PURE__*/React.createElement(CardHead,{className:AlertDrawer.head},/*#__PURE__*/React.createElement(CardActions,null,this.props.isExpanded?/*#__PURE__*/React.createElement(Button,{id:\"alert_drawer_collapse\",variant:\"plain\",onClick:this.props.expandDrawer},/*#__PURE__*/React.createElement(KialiIcon.AngleDoubleRight,null)):/*#__PURE__*/React.createElement(Button,{id:\"alert_drawer_expand\",variant:\"plain\",onClick:this.props.expandDrawer},/*#__PURE__*/React.createElement(KialiIcon.AngleDoubleLeft,null)),/*#__PURE__*/React.createElement(Button,{id:\"alert_drawer_close\",variant:\"plain\",onClick:this.props.hideDrawer},/*#__PURE__*/React.createElement(CloseIcon,null))),/*#__PURE__*/React.createElement(CardHeader,null,this.props.title)),/*#__PURE__*/React.createElement(CardBody,{className:AlertDrawer.body},this.props.groups.length===0?noNotificationsMessage:/*#__PURE__*/React.createElement(BoundingClientAwareComponent,{className:AlertDrawer.wrapper,maxHeight:{type:PropertyType.VIEWPORT_HEIGHT_MINUS_TOP,margin:AlertDrawer.wrapperMarginBottom}},/*#__PURE__*/React.createElement(Accordion,{className:AlertDrawer.groups},this.props.groups.map(function(group){return hideGroup(group)?null:/*#__PURE__*/React.createElement(AccordionItem,{key:group.id+'_item'},/*#__PURE__*/React.createElement(AccordionToggle,{id:group.id+'_toggle',isExpanded:group.id===_this.props.expandedGroupId,onClick:function onClick(){_this.props.toggleGroup(group);}},group.title,\" \",getUnreadMessageLabel(group.messages)),/*#__PURE__*/React.createElement(AccordionContent,{id:group.id+'_content',isHidden:group.id!==_this.props.expandedGroupId},/*#__PURE__*/React.createElement(AlertDrawerGroupContainer,{key:group.id,group:group})));})))));}}]);return AlertDrawer;}(React.PureComponent);AlertDrawer.head=style({paddingBottom:0});AlertDrawer.body=style({paddingLeft:0,paddingRight:0});AlertDrawer.wrapper=style({overflow:'auto'});AlertDrawer.wrapperMarginBottom=10;AlertDrawer.groups=style({paddingTop:0,paddingBottom:0});var mapStateToProps=function mapStateToProps(state){return{expandedGroupId:state.messageCenter.expandedGroupId,groups:state.messageCenter.groups,isExpanded:state.messageCenter.expanded,isHidden:state.messageCenter.hidden};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{expandDrawer:function expandDrawer(){return dispatch(MessageCenterActions.toggleExpandedMessageCenter());},hideDrawer:function hideDrawer(){return dispatch(MessageCenterActions.hideMessageCenter());},toggleGroup:function toggleGroup(group){return dispatch(MessageCenterActions.toggleGroup(group.id));}};};var AlertDrawerContainer=connect(mapStateToProps,mapDispatchToProps)(AlertDrawer);export default AlertDrawerContainer;","map":null,"metadata":{},"sourceType":"module"}