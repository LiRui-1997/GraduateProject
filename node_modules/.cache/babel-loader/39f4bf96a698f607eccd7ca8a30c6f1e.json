{"ast":null,"code":"import _classCallCheck from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/root/GraduateProject/src/pages/extensions/iter8/MSetup/MSetup.tsx\";\nimport * as React from 'react'; // import { Button } from '@patternfly/react-core';\n\nimport { message, Button } from 'antd';\nimport '../../../../styles/index.css';\nimport { style } from 'typestyle'; // import DefaultSecondaryMasthead from '../../../../components/DefaultSecondaryMasthead/DefaultSecondaryMasthead';\n// import { RenderContent } from '../../../../components/Nav/Page';\n// import { style } from 'typestyle';\n\nimport { Collapse } from 'antd'; //指标列表\n\nvar Panel = Collapse.Panel;\n\nfunction callback(key) {\n  console.log(key);\n}\n\nvar text1 = \"\\nsum(increase(istio_requests_total{reporter='source',job='kubernetes-pods'}[$interval])) by ($version_labels)\\n\";\nvar text2 = \"\\nsum(increase(istio_request_duration_milliseconds_sum{reporter='source',job='kubernetes-pods'}[$interval])) by ($version_labels)\\n\";\nvar text3 = \"\\nsum(increase(istio_requests_total{response_code=~'5..',reporter='source',job='kubernetes-pods'}[$interval])) by ($version_labels)\\n\"; // iframe Url\n// var metrics_url = \"http://metric.ingress.isa.buaanlsde.cn/d/eXPEaNnZz/experiment-metrics?orgId=1&refresh=10s&kiosk=tv\"\n\nvar yaml_url = 'https://yamleditor.ingress.isa.buaanlsde.cn/'; // const containerPadding = style({ padding: '20px 20px 20px 20px' });\n\n// const openNotification = () => {\n//   notification.open({\n//     message: 'Notification Title',\n//     description:\n//       'This is the content of the notification. This is the content of the notification. This is the content of the notification.',\n//     onClick: () => {\n//       console.log('Notification Clicked!');\n//     },\n//   });\n// };\nvar info = function info() {\n  message.success('配置已保存！');\n};\n\nvar containerPadding = style({\n  padding: '20px 20px 20px 20px'\n});\n\nvar MetricsPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(MetricsPage, _React$Component);\n\n  var _super = _createSuper(MetricsPage);\n\n  function MetricsPage(props) {\n    var _this;\n\n    _classCallCheck(this, MetricsPage);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      iFrameHeight: '0px',\n      random: 0\n    };\n    return _this;\n  }\n\n  _createClass(MetricsPage, [{\n    key: \"refresh\",\n    value: function refresh() {\n      this.setState({\n        random: this.state.random + 1\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(yaml_url);\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: containerPadding,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Collapse, {\n        onChange: callback,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Panel, {\n        header: \"request_count\\uFF08\\u670D\\u52A1\\u8BF7\\u6C42\\u6570\\uFF09\",\n        key: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }\n      }, text1)), /*#__PURE__*/React.createElement(Panel, {\n        header: \"total_latency\\uFF08\\u7D2F\\u8BA1\\u5EF6\\u8FDF\\uFF09\",\n        key: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 15\n        }\n      }, text2)), /*#__PURE__*/React.createElement(Panel, {\n        header: \"error_count\\uFF08\\u54CD\\u5E94\\u9519\\u8BEF\\u6570\\uFF09\",\n        key: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }\n      }, text3)), /*#__PURE__*/React.createElement(Panel, {\n        header: \"mean_latency\\uFF08\\u5E73\\u5747\\u5EF6\\u8FDF\\uFF09\",\n        key: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }\n      }, text3))), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          float: 'left',\n          paddingLeft: '5px',\n          paddingTop: '20px',\n          paddingBottom: '20px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          paddingRight: '5px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        onClick: info,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }\n      }, \"\\u4FDD\\u5B58\")), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          paddingRight: '5px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        onClick: function onClick() {\n          _this2.refresh();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }\n      }, \"\\u5237\\u65B0\"))), /*#__PURE__*/React.createElement(\"iframe\", {\n        key: this.state.random,\n        ref: \"iframe\",\n        title: \"yamlEditorUrl\",\n        scrolling: \"no\",\n        frameBorder: \"0\",\n        style: {\n          width: '100%',\n          height: this.state.iFrameHeight,\n          overflow: 'visible'\n        },\n        onLoad: function onLoad() {\n          var h = document.documentElement.clientHeight - 500;\n\n          _this2.setState({\n            iFrameHeight: h + 'px'\n          });\n        },\n        src: yaml_url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return MetricsPage;\n}(React.Component);\n\nexport { MetricsPage as default };","map":{"version":3,"sources":["/root/GraduateProject/src/pages/extensions/iter8/MSetup/MSetup.tsx"],"names":["React","message","Button","style","Collapse","Panel","callback","key","console","log","text1","text2","text3","yaml_url","info","success","containerPadding","padding","MetricsPage","props","state","iFrameHeight","random","setState","float","paddingLeft","paddingTop","paddingBottom","paddingRight","refresh","width","height","overflow","h","document","documentElement","clientHeight","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\n// import { Button } from '@patternfly/react-core';\nimport { message, Button } from 'antd';\nimport '../../../../styles/index.css';\nimport { style } from 'typestyle';\n// import DefaultSecondaryMasthead from '../../../../components/DefaultSecondaryMasthead/DefaultSecondaryMasthead';\n// import { RenderContent } from '../../../../components/Nav/Page';\n// import { style } from 'typestyle';\nimport { Collapse } from 'antd';\n\n//指标列表\nconst { Panel } = Collapse;\n\nfunction callback(key) {\n  console.log(key);\n}\n\nconst text1 = `\nsum(increase(istio_requests_total{reporter='source',job='kubernetes-pods'}[$interval])) by ($version_labels)\n`;\n\nconst text2 = `\nsum(increase(istio_request_duration_milliseconds_sum{reporter='source',job='kubernetes-pods'}[$interval])) by ($version_labels)\n`;\nconst text3 = `\nsum(increase(istio_requests_total{response_code=~'5..',reporter='source',job='kubernetes-pods'}[$interval])) by ($version_labels)\n`;\n\n// iframe Url\n// var metrics_url = \"http://metric.ingress.isa.buaanlsde.cn/d/eXPEaNnZz/experiment-metrics?orgId=1&refresh=10s&kiosk=tv\"\nvar yaml_url = 'https://yamleditor.ingress.isa.buaanlsde.cn/';\n\n// const containerPadding = style({ padding: '20px 20px 20px 20px' });\n\ninterface isState {\n  iFrameHeight: string;\n  random: number;\n}\n\n// const openNotification = () => {\n//   notification.open({\n//     message: 'Notification Title',\n//     description:\n//       'This is the content of the notification. This is the content of the notification. This is the content of the notification.',\n//     onClick: () => {\n//       console.log('Notification Clicked!');\n//     },\n//   });\n// };\n\nconst info = () => {\n  message.success('配置已保存！');\n};\n\nconst containerPadding = style({ padding: '20px 20px 20px 20px' });\n\nexport default class MetricsPage extends React.Component<any, isState> {\n  constructor(props: isState) {\n    super(props);\n    this.state = {\n      iFrameHeight: '0px',\n      random: 0\n    };\n  }\n\n  refresh() {\n    this.setState({\n      random: this.state.random + 1\n    });\n  }\n\n  render() {\n    console.log(yaml_url);\n    return (\n      <>\n        <div className={containerPadding}>\n          <Collapse onChange={callback}>\n            <Panel header=\"request_count（服务请求数）\" key=\"1\">\n              <p>{text1}</p>\n            </Panel>\n            <Panel header=\"total_latency（累计延迟）\" key=\"2\">\n              <p>{text2}</p>\n            </Panel>\n            <Panel header=\"error_count（响应错误数）\" key=\"3\">\n              <p>{text3}</p>\n            </Panel>\n            <Panel header=\"mean_latency（平均延迟）\" key=\"3\">\n              <p>{text3}</p>\n            </Panel>\n          </Collapse>\n          <span style={{ float: 'left', paddingLeft: '5px', paddingTop: '20px', paddingBottom: '20px' }}>\n            <span style={{ paddingRight: '5px' }}>\n              <Button type=\"primary\" onClick={info}>\n                保存\n              </Button>\n            </span>\n            <span style={{ paddingRight: '5px' }}>\n              <Button\n                type=\"primary\"\n                onClick={() => {\n                  this.refresh();\n                }}\n              >\n                刷新\n              </Button>\n            </span>\n          </span>\n          <iframe\n            key={this.state.random}\n            ref=\"iframe\"\n            title=\"yamlEditorUrl\"\n            scrolling=\"no\"\n            frameBorder=\"0\"\n            style={{\n              width: '100%',\n              height: this.state.iFrameHeight,\n              overflow: 'visible'\n            }}\n            onLoad={() => {\n              let h = document.documentElement.clientHeight - 500;\n              this.setState({\n                iFrameHeight: h + 'px'\n              });\n            }}\n            src={yaml_url}\n          />\n        </div>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}