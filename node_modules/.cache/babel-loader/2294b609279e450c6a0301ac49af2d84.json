{"ast":null,"code":"import _createForOfIteratorHelper from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _classCallCheck from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/root/kiali-ui/src/components/Tour/TourStop.tsx\";\nimport * as React from 'react';\nimport { Button, Popover } from '@patternfly/react-core';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport ReactResizeDetector from 'react-resize-detector';\nimport { KialiIcon } from 'config/KialiIcon';\nimport { TourActions } from 'actions/TourActions';\nimport { style } from 'typestyle';\nimport { PFColors } from 'components/Pf/PfColors';\nvar stopNumberStyle = style({\n  borderRadius: '20px',\n  backgroundColor: PFColors.Blue300,\n  padding: '2px 6px',\n  marginRight: '10px',\n  color: PFColors.White\n});\nexport function getNextTourStop(activeTour, activeStop, direction) {\n  if (direction === 'back') {\n    for (var i = activeStop - 1; i >= 0; --i) {\n      if (activeTour.stops[i].isValid) {\n        return i;\n      }\n    }\n  } else {\n    for (var _i = activeStop + 1; _i < activeTour.stops.length; ++_i) {\n      if (activeTour.stops[_i].isValid) {\n        return _i;\n      }\n    }\n  }\n\n  return undefined;\n}\n\nvar TourStop = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(TourStop, _React$PureComponent);\n\n  var _super = _createSuper(TourStop);\n\n  function TourStop(props) {\n    var _this;\n\n    _classCallCheck(this, TourStop);\n\n    _this = _super.call(this, props);\n    _this.tourStopInfo = void 0;\n\n    _this.getStop = function (direction) {\n      if (_this.props.activeStop === undefined) {\n        return undefined;\n      }\n\n      return getNextTourStop(_this.props.activeTour, _this.props.activeStop, direction);\n    };\n\n    _this.setStop = function (stop) {\n      _this.props.setStop(stop);\n    };\n\n    _this.backButton = function () {\n      var stop = _this.getStop('back');\n\n      return /*#__PURE__*/React.createElement(Button, {\n        isDisabled: stop === undefined,\n        variant: \"secondary\",\n        onClick: function onClick() {\n          return _this.setStop(stop);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(KialiIcon.AngleLeft, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }\n      }), \" Back\");\n    };\n\n    _this.nextButton = function () {\n      var right = style({\n        float: 'right'\n      });\n\n      var stop = _this.getStop('forward');\n\n      if (stop === undefined) {\n        return /*#__PURE__*/React.createElement(Button, {\n          className: right,\n          variant: \"primary\",\n          onClick: _this.props.endTour,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 9\n          }\n        }, \"Done\");\n      }\n\n      return /*#__PURE__*/React.createElement(Button, {\n        className: right,\n        variant: \"primary\",\n        onClick: function onClick() {\n          return _this.setStop(stop);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 7\n        }\n      }, \"Next \", /*#__PURE__*/React.createElement(KialiIcon.AngleRight, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 14\n        }\n      }));\n    };\n\n    _this.activeInfo = function () {\n      var _iterator = _createForOfIteratorHelper(_this.tourStopInfo),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var tsi = _step.value;\n          var name = tsi.name;\n          var isActive = _this.props.activeTour !== undefined && name === _this.props.activeTour.stops[_this.props.activeStop].name;\n\n          if (isActive) {\n            return tsi;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return undefined;\n    };\n\n    _this.onHidden = function () {\n      if (_this.activeInfo()) {\n        _this.forceUpdate();\n      }\n    };\n\n    _this.onResize = function () {\n      if (_this.activeInfo()) {\n        _this.forceUpdate();\n      }\n    };\n\n    _this.shouldClose = function () {\n      _this.props.endTour();\n    };\n\n    _this.tourStopInfo = Array.isArray(props.info) ? props.info : [props.info];\n    return _this;\n  }\n\n  _createClass(TourStop, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.tourStopInfo.forEach(function (ti) {\n        return ti.isValid = true;\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.tourStopInfo.forEach(function (ti) {\n        return ti.isValid = false;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var info = this.activeInfo();\n      var offset = info && info.offset ? info.offset : '0, 0';\n      var tippyProps = {\n        offset: offset\n      };\n      var children = this.props.children;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, info ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ReactResizeDetector, {\n        refreshMode: 'debounce',\n        refreshRate: 100,\n        skipOnMount: true,\n        handleWidth: true,\n        handleHeight: true,\n        onResize: this.onResize,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Popover, {\n        isVisible: true,\n        shouldClose: this.shouldClose,\n        onHidden: this.onHidden,\n        position: info.position,\n        tippyProps: tippyProps,\n        headerContent: /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: stopNumberStyle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 19\n          }\n        }, this.props.activeStop + 1), /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 19\n          }\n        }, info.name)),\n        bodyContent: info.description ? info.description : info.htmlDescription,\n        footerContent: /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 17\n          }\n        }, this.backButton(), this.nextButton()),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(React.Fragment, null, children))) : /*#__PURE__*/React.createElement(React.Fragment, null, children));\n    }\n  }]);\n\n  return TourStop;\n}(React.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    activeTour: state.tourState.activeTour,\n    activeStop: state.tourState.activeStop\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    endTour: bindActionCreators(TourActions.endTour, dispatch),\n    setStop: bindActionCreators(TourActions.setStop, dispatch)\n  };\n};\n\nvar TourStopContainer = connect(mapStateToProps, mapDispatchToProps)(TourStop);\nexport default TourStopContainer;","map":{"version":3,"sources":["/root/kiali-ui/src/components/Tour/TourStop.tsx"],"names":["React","Button","Popover","connect","bindActionCreators","ReactResizeDetector","KialiIcon","TourActions","style","PFColors","stopNumberStyle","borderRadius","backgroundColor","Blue300","padding","marginRight","color","White","getNextTourStop","activeTour","activeStop","direction","i","stops","isValid","length","undefined","TourStop","props","tourStopInfo","getStop","setStop","stop","backButton","nextButton","right","float","endTour","activeInfo","tsi","name","isActive","onHidden","forceUpdate","onResize","shouldClose","Array","isArray","info","forEach","ti","offset","tippyProps","children","position","description","htmlDescription","PureComponent","mapStateToProps","state","tourState","mapDispatchToProps","dispatch","TourStopContainer"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Button, Popover, PopoverPosition } from '@patternfly/react-core';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { KialiAppState } from 'store/Store';\nimport ReactResizeDetector from 'react-resize-detector';\nimport { KialiIcon } from 'config/KialiIcon';\nimport { KialiAppAction } from 'actions/KialiAppAction';\nimport { TourActions } from 'actions/TourActions';\nimport { style } from 'typestyle';\nimport { PFColors } from 'components/Pf/PfColors';\n\nexport interface TourStopInfo {\n  name: string; // displayed in the tour stop header.\n  description?: string; // displayed as the tour stop body\n  htmlDescription?: JSX.Element;\n  position?: PopoverPosition;\n  offset?: string; // tippy prop: 'xOffset, yOffset'\n  isValid?: boolean; // internal use, leave unset\n}\n\nexport interface TourInfo {\n  name: string;\n  stops: Array<TourStopInfo>;\n}\n\nconst stopNumberStyle = style({\n  borderRadius: '20px',\n  backgroundColor: PFColors.Blue300,\n  padding: '2px 6px',\n  marginRight: '10px',\n  color: PFColors.White\n});\n\ntype ReduxProps = {\n  activeTour?: TourInfo;\n  activeStop?: number;\n\n  endTour: () => void;\n  setStop: (stop: number) => void;\n};\n\ntype TourStopProps = ReduxProps & {\n  children?: React.ReactNode;\n  info: TourStopInfo | TourStopInfo[];\n};\n\nexport function getNextTourStop(\n  activeTour: TourInfo,\n  activeStop: number,\n  direction: 'back' | 'forward'\n): number | undefined {\n  if (direction === 'back') {\n    for (let i: number = activeStop - 1; i >= 0; --i) {\n      if (activeTour.stops[i].isValid) {\n        return i;\n      }\n    }\n  } else {\n    for (let i: number = activeStop + 1; i < activeTour.stops.length; ++i) {\n      if (activeTour.stops[i].isValid) {\n        return i;\n      }\n    }\n  }\n  return undefined;\n}\n\nclass TourStop extends React.PureComponent<TourStopProps> {\n  tourStopInfo: TourStopInfo[];\n\n  constructor(props: TourStopProps) {\n    super(props);\n\n    this.tourStopInfo = Array.isArray(props.info) ? props.info : [props.info];\n  }\n\n  private getStop = (direction: 'back' | 'forward'): number | undefined => {\n    if (this.props.activeStop === undefined) {\n      return undefined;\n    }\n\n    return getNextTourStop(this.props.activeTour!, this.props.activeStop!, direction);\n  };\n\n  private setStop = (stop: number) => {\n    this.props.setStop(stop);\n  };\n\n  private backButton = () => {\n    const stop = this.getStop('back');\n    return (\n      <Button isDisabled={stop === undefined} variant=\"secondary\" onClick={() => this.setStop(stop!)}>\n        <KialiIcon.AngleLeft /> Back\n      </Button>\n    );\n  };\n\n  private nextButton = () => {\n    const right = style({\n      float: 'right'\n    });\n    const stop = this.getStop('forward');\n\n    if (stop === undefined) {\n      return (\n        <Button className={right} variant=\"primary\" onClick={this.props.endTour}>\n          Done\n        </Button>\n      );\n    }\n\n    return (\n      <Button className={right} variant=\"primary\" onClick={() => this.setStop(stop!)}>\n        Next <KialiIcon.AngleRight />\n      </Button>\n    );\n  };\n\n  private activeInfo = (): TourStopInfo | undefined => {\n    for (const tsi of this.tourStopInfo) {\n      const name = tsi.name;\n      const isActive =\n        this.props.activeTour !== undefined && name === this.props.activeTour.stops[this.props.activeStop!].name;\n      if (isActive) {\n        return tsi;\n      }\n    }\n    return undefined;\n  };\n\n  // This is here to workaround what seems to be a bug.  As far as I know when isVisible is set then outside clicks should not hide\n  // the Popover, but it seems to be happening in certain scenarios. So, if the Popover is still valid, unhide it immediately.\n  private onHidden = () => {\n    if (this.activeInfo()) {\n      this.forceUpdate();\n    }\n  };\n\n  private onResize = () => {\n    if (this.activeInfo()) {\n      this.forceUpdate();\n    }\n  };\n\n  private shouldClose = () => {\n    this.props.endTour();\n  };\n\n  componentDidMount() {\n    this.tourStopInfo.forEach(ti => (ti.isValid = true));\n  }\n\n  componentWillUnmount() {\n    this.tourStopInfo.forEach(ti => (ti.isValid = false));\n  }\n\n  render() {\n    const info = this.activeInfo();\n    const offset = info && info.offset ? info.offset : '0, 0';\n    const tippyProps: Partial<any> = { offset: offset };\n    const children = this.props.children;\n\n    return (\n      <>\n        {info ? (\n          <>\n            <ReactResizeDetector\n              refreshMode={'debounce'}\n              refreshRate={100}\n              skipOnMount={true}\n              handleWidth={true}\n              handleHeight={true}\n              onResize={this.onResize}\n            />\n            <Popover\n              isVisible={true}\n              shouldClose={this.shouldClose}\n              onHidden={this.onHidden}\n              position={info.position}\n              tippyProps={tippyProps}\n              headerContent={\n                <div>\n                  <span className={stopNumberStyle}>{this.props.activeStop! + 1}</span>\n                  <span>{info.name}</span>\n                </div>\n              }\n              bodyContent={info.description ? info.description : info.htmlDescription}\n              footerContent={\n                <div>\n                  {this.backButton()}\n                  {this.nextButton()}\n                </div>\n              }\n            >\n              <>{children}</>\n            </Popover>\n          </>\n        ) : (\n          <>{children}</>\n        )}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state: KialiAppState) => ({\n  activeTour: state.tourState.activeTour,\n  activeStop: state.tourState.activeStop\n});\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<KialiAppState, void, KialiAppAction>) => {\n  return {\n    endTour: bindActionCreators(TourActions.endTour, dispatch),\n    setStop: bindActionCreators(TourActions.setStop, dispatch)\n  };\n};\n\nconst TourStopContainer = connect(mapStateToProps, mapDispatchToProps)(TourStop);\n\nexport default TourStopContainer;\n"]},"metadata":{},"sourceType":"module"}