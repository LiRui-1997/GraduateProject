{"ast":null,"code":"import _classCallCheck from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/root/kiali-ui/src/components/IstioActions/IstioActionsDropdown.tsx\";\nimport * as React from 'react';\nimport { Button, Dropdown, DropdownItem, DropdownPosition, DropdownToggle, Modal, Text, TextVariants, Tooltip, TooltipPosition } from '@patternfly/react-core';\nimport { serverConfig } from '../../config';\n\nvar IstioActionDropdown = /*#__PURE__*/function (_React$Component) {\n  _inherits(IstioActionDropdown, _React$Component);\n\n  var _super = _createSuper(IstioActionDropdown);\n\n  function IstioActionDropdown(props) {\n    var _this;\n\n    _classCallCheck(this, IstioActionDropdown);\n\n    _this = _super.call(this, props);\n\n    _this.onSelect = function (_) {\n      _this.setState({\n        dropdownOpen: !_this.state.dropdownOpen\n      });\n    };\n\n    _this.onToggle = function (dropdownState) {\n      _this.setState({\n        dropdownOpen: dropdownState\n      });\n    };\n\n    _this.hideConfirmModal = function () {\n      _this.setState({\n        showConfirmModal: false\n      });\n    };\n\n    _this.onClickDelete = function () {\n      _this.setState({\n        showConfirmModal: true\n      });\n    };\n\n    _this.onDelete = function () {\n      _this.hideConfirmModal();\n\n      _this.props.onDelete();\n    };\n\n    _this.renderTooltip = function (key, position, msg, child) {\n      return /*#__PURE__*/React.createElement(Tooltip, {\n        key: 'tooltip_' + key,\n        position: position,\n        content: /*#__PURE__*/React.createElement(React.Fragment, null, msg),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'inline-block',\n          cursor: 'not-allowed',\n          textAlign: 'left'\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      }, child));\n    };\n\n    _this.state = {\n      showConfirmModal: false,\n      dropdownOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(IstioActionDropdown, [{\n    key: \"render\",\n    value: function render() {\n      var objectName = this.props.objectKind ? this.props.objectKind : 'Istio object';\n      var deleteAction = /*#__PURE__*/React.createElement(DropdownItem, {\n        key: \"delete\",\n        onClick: this.onClickDelete,\n        isDisabled: !this.props.canDelete,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 7\n        }\n      }, \"Delete\");\n      var deleteActionWrapper = serverConfig.deployment.viewOnlyMode ? this.renderTooltip('delete', TooltipPosition.left, 'User has not permissions', deleteAction) : deleteAction;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dropdown, {\n        id: \"actions\",\n        toggle: /*#__PURE__*/React.createElement(DropdownToggle, {\n          onToggle: this.onToggle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 19\n          }\n        }, \"Actions\"),\n        onSelect: this.onSelect,\n        position: DropdownPosition.right,\n        isOpen: this.state.dropdownOpen,\n        dropdownItems: [deleteActionWrapper],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Modal, {\n        title: \"Confirm Delete\",\n        isSmall: true,\n        isOpen: this.state.showConfirmModal,\n        onClose: this.hideConfirmModal,\n        actions: [/*#__PURE__*/React.createElement(Button, {\n          key: \"cancel\",\n          variant: \"secondary\",\n          onClick: this.hideConfirmModal,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }\n        }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n          key: \"confirm\",\n          variant: \"danger\",\n          onClick: this.onDelete,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }\n        }, \"Delete\")],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Text, {\n        component: TextVariants.p,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      }, \"Are you sure you want to delete the \", objectName, \" '\", this.props.objectName, \"'? It cannot be undone. Make sure this is something you really want to do!\")));\n    }\n  }]);\n\n  return IstioActionDropdown;\n}(React.Component);\n\nexport default IstioActionDropdown;","map":{"version":3,"sources":["/root/kiali-ui/src/components/IstioActions/IstioActionsDropdown.tsx"],"names":["React","Button","Dropdown","DropdownItem","DropdownPosition","DropdownToggle","Modal","Text","TextVariants","Tooltip","TooltipPosition","serverConfig","IstioActionDropdown","props","onSelect","_","setState","dropdownOpen","state","onToggle","dropdownState","hideConfirmModal","showConfirmModal","onClickDelete","onDelete","renderTooltip","key","position","msg","child","display","cursor","textAlign","objectName","objectKind","deleteAction","canDelete","deleteActionWrapper","deployment","viewOnlyMode","left","right","p","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Button,\n  Dropdown,\n  DropdownItem,\n  DropdownPosition,\n  DropdownToggle,\n  Modal,\n  Text,\n  TextVariants,\n  Tooltip,\n  TooltipPosition\n} from '@patternfly/react-core';\nimport { serverConfig } from '../../config';\n\ntype Props = {\n  objectKind?: string;\n  objectName: string;\n  canDelete: boolean;\n  onDelete: () => void;\n};\n\ntype State = {\n  showConfirmModal: boolean;\n  dropdownOpen: boolean;\n};\n\nclass IstioActionDropdown extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      showConfirmModal: false,\n      dropdownOpen: false\n    };\n  }\n\n  onSelect = _ => {\n    this.setState({\n      dropdownOpen: !this.state.dropdownOpen\n    });\n  };\n\n  onToggle = (dropdownState: boolean) => {\n    this.setState({\n      dropdownOpen: dropdownState\n    });\n  };\n\n  hideConfirmModal = () => {\n    this.setState({ showConfirmModal: false });\n  };\n\n  onClickDelete = () => {\n    this.setState({ showConfirmModal: true });\n  };\n\n  onDelete = () => {\n    this.hideConfirmModal();\n    this.props.onDelete();\n  };\n\n  renderTooltip = (key, position, msg, child): JSX.Element => {\n    return (\n      <Tooltip key={'tooltip_' + key} position={position} content={<>{msg}</>}>\n        <div style={{ display: 'inline-block', cursor: 'not-allowed', textAlign: 'left' }}>{child}</div>\n      </Tooltip>\n    );\n  };\n\n  render() {\n    const objectName = this.props.objectKind ? this.props.objectKind : 'Istio object';\n    const deleteAction = (\n      <DropdownItem key=\"delete\" onClick={this.onClickDelete} isDisabled={!this.props.canDelete}>\n        Delete\n      </DropdownItem>\n    );\n    const deleteActionWrapper = serverConfig.deployment.viewOnlyMode\n      ? this.renderTooltip('delete', TooltipPosition.left, 'User has not permissions', deleteAction)\n      : deleteAction;\n\n    return (\n      <>\n        <Dropdown\n          id=\"actions\"\n          toggle={<DropdownToggle onToggle={this.onToggle}>Actions</DropdownToggle>}\n          onSelect={this.onSelect}\n          position={DropdownPosition.right}\n          isOpen={this.state.dropdownOpen}\n          dropdownItems={[deleteActionWrapper]}\n        />\n        <Modal\n          title=\"Confirm Delete\"\n          isSmall={true}\n          isOpen={this.state.showConfirmModal}\n          onClose={this.hideConfirmModal}\n          actions={[\n            <Button key=\"cancel\" variant=\"secondary\" onClick={this.hideConfirmModal}>\n              Cancel\n            </Button>,\n            <Button key=\"confirm\" variant=\"danger\" onClick={this.onDelete}>\n              Delete\n            </Button>\n          ]}\n        >\n          <Text component={TextVariants.p}>\n            Are you sure you want to delete the {objectName} '{this.props.objectName}'? It cannot be undone. Make sure\n            this is something you really want to do!\n          </Text>\n        </Modal>\n      </>\n    );\n  }\n}\n\nexport default IstioActionDropdown;\n"]},"metadata":{},"sourceType":"module"}