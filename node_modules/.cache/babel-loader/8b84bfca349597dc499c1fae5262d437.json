{"ast":null,"code":"import _classCallCheck from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/root/GraduateProject/src/pages/IstioConfigDetails/IstioObjectDetails/DestinationRuleOverview.tsx\";\nimport * as React from 'react';\nimport DetailObject from '../../../components/Details/DetailObject';\nimport { Stack, StackItem, Text, TextVariants, Title, TitleLevel, TitleSize, TooltipPosition } from '@patternfly/react-core';\nimport { Table, TableBody, TableHeader, TableVariant } from '@patternfly/react-table';\nimport { checkForPath } from '../../../types/ServiceInfo';\nimport ValidationList from '../../../components/Validations/ValidationList';\nimport Labels from '../../../components/Label/Labels';\nimport ServiceLink from './ServiceLink';\nimport './IstioObjectDetails.css';\n\nvar DestinationRuleOverview = /*#__PURE__*/function (_React$Component) {\n  _inherits(DestinationRuleOverview, _React$Component);\n\n  var _super = _createSuper(DestinationRuleOverview);\n\n  function DestinationRuleOverview() {\n    _classCallCheck(this, DestinationRuleOverview);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(DestinationRuleOverview, [{\n    key: \"subsetValidation\",\n    value: function subsetValidation(subsetIndex) {\n      var checks = checkForPath(this.props.validation, 'spec/subsets[' + subsetIndex + ']');\n      return /*#__PURE__*/React.createElement(ValidationList, {\n        checks: checks,\n        tooltipPosition: TooltipPosition.right,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 12\n        }\n      });\n    }\n  }, {\n    key: \"columnsSubsets\",\n    value: function columnsSubsets() {\n      return [{\n        title: 'Status',\n        props: {}\n      }, {\n        title: 'Name',\n        props: {}\n      }, {\n        title: 'Labels',\n        props: {}\n      }, {\n        title: 'Traffic Policy',\n        props: {}\n      }];\n    }\n  }, {\n    key: \"rowsSubset\",\n    value: function rowsSubset() {\n      var _this = this;\n\n      var subsets = this.props.destinationRule.spec.subsets || [];\n      return subsets.map(function (subset, index) {\n        return {\n          cells: [{\n            title: _this.subsetValidation(index)\n          }, {\n            title: subset.name\n          }, {\n            title: /*#__PURE__*/React.createElement(Labels, {\n              key: 'subset-labels-' + index,\n              labels: subset.labels,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 18\n              }\n            })\n          }, {\n            title: /*#__PURE__*/React.createElement(DetailObject, {\n              name: \"\",\n              detail: subset.trafficPolicy,\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 18\n              }\n            })\n          }]\n        };\n      });\n    }\n  }, {\n    key: \"generateSubsets\",\n    value: function generateSubsets() {\n      var subsets = this.props.destinationRule.spec.subsets || [];\n      var hasSubsets = subsets.length > 0;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, hasSubsets ? /*#__PURE__*/React.createElement(Table, {\n        \"aria-label\": 'DestinationRule SubSets table',\n        variant: TableVariant.compact,\n        cells: this.columnsSubsets(),\n        rows: this.rowsSubset(),\n        className: \"table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TableHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(TableBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }\n      })) : /*#__PURE__*/React.createElement(Text, {\n        component: TextVariants.p,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      }, \"No subsets defined.\"));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var destinationRule = this.props.destinationRule;\n      var isValid = !!this.props.validation && this.props.validation.checks.length === 0;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Title, {\n        headingLevel: TitleLevel.h3,\n        size: TitleSize.xl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }\n      }, \"Destination Rule Overview\"), /*#__PURE__*/React.createElement(Stack, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(StackItem, {\n        id: 'subsets',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }\n      }, destinationRule.spec.host && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Text, {\n        component: TextVariants.h3,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      }, \"Host\"), /*#__PURE__*/React.createElement(ServiceLink, {\n        namespace: destinationRule.metadata.namespace || '',\n        host: destinationRule.spec.host,\n        isValid: isValid,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      })), this.generateSubsets())));\n    }\n  }]);\n\n  return DestinationRuleOverview;\n}(React.Component);\n\nexport default DestinationRuleOverview;","map":{"version":3,"sources":["/root/GraduateProject/src/pages/IstioConfigDetails/IstioObjectDetails/DestinationRuleOverview.tsx"],"names":["React","DetailObject","Stack","StackItem","Text","TextVariants","Title","TitleLevel","TitleSize","TooltipPosition","Table","TableBody","TableHeader","TableVariant","checkForPath","ValidationList","Labels","ServiceLink","DestinationRuleOverview","subsetIndex","checks","props","validation","right","title","subsets","destinationRule","spec","map","subset","index","cells","subsetValidation","name","labels","trafficPolicy","hasSubsets","length","compact","columnsSubsets","rowsSubset","p","isValid","h3","xl","host","metadata","namespace","generateSubsets","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { DestinationRule, ObjectValidation } from '../../../types/IstioObjects';\nimport DetailObject from '../../../components/Details/DetailObject';\nimport {\n  Stack,\n  StackItem,\n  Text,\n  TextVariants,\n  Title,\n  TitleLevel,\n  TitleSize,\n  TooltipPosition\n} from '@patternfly/react-core';\nimport { Table, TableBody, TableHeader, TableVariant } from '@patternfly/react-table';\nimport { checkForPath } from '../../../types/ServiceInfo';\nimport ValidationList from '../../../components/Validations/ValidationList';\nimport Labels from '../../../components/Label/Labels';\nimport ServiceLink from './ServiceLink';\nimport './IstioObjectDetails.css';\n\ninterface DestinationRuleProps {\n  namespace: string;\n  destinationRule: DestinationRule;\n  validation?: ObjectValidation;\n}\n\nclass DestinationRuleOverview extends React.Component<DestinationRuleProps> {\n  subsetValidation(subsetIndex: number) {\n    const checks = checkForPath(this.props.validation, 'spec/subsets[' + subsetIndex + ']');\n    return <ValidationList checks={checks} tooltipPosition={TooltipPosition.right} />;\n  }\n\n  columnsSubsets() {\n    return [\n      {\n        title: 'Status',\n        props: {}\n      },\n      {\n        title: 'Name',\n        props: {}\n      },\n      {\n        title: 'Labels',\n        props: {}\n      },\n      {\n        title: 'Traffic Policy',\n        props: {}\n      }\n    ];\n  }\n\n  rowsSubset() {\n    const subsets = this.props.destinationRule.spec.subsets || [];\n    return subsets.map((subset, index) => ({\n      cells: [\n        { title: this.subsetValidation(index) },\n        { title: subset.name },\n        { title: <Labels key={'subset-labels-' + index} labels={subset.labels} /> },\n        { title: <DetailObject name=\"\" detail={subset.trafficPolicy} /> }\n      ]\n    }));\n  }\n\n  generateSubsets() {\n    const subsets = this.props.destinationRule.spec.subsets || [];\n    const hasSubsets = subsets.length > 0;\n    return (\n      <>\n        {hasSubsets ? (\n          <Table\n            aria-label={'DestinationRule SubSets table'}\n            variant={TableVariant.compact}\n            cells={this.columnsSubsets()}\n            rows={this.rowsSubset()}\n            className=\"table\"\n          >\n            <TableHeader />\n            <TableBody />\n          </Table>\n        ) : (\n          <Text component={TextVariants.p}>No subsets defined.</Text>\n        )}\n      </>\n    );\n  }\n\n  render() {\n    const destinationRule = this.props.destinationRule;\n    const isValid = !!this.props.validation && this.props.validation.checks.length === 0;\n    return (\n      <>\n        <Title headingLevel={TitleLevel.h3} size={TitleSize.xl}>\n          Destination Rule Overview\n        </Title>\n        <Stack>\n          <StackItem id={'subsets'}>\n            {destinationRule.spec.host && (\n              <>\n                <Text component={TextVariants.h3}>Host</Text>\n                <ServiceLink\n                  namespace={destinationRule.metadata.namespace || ''}\n                  host={destinationRule.spec.host}\n                  isValid={isValid}\n                />\n              </>\n            )}\n            {this.generateSubsets()}\n          </StackItem>\n        </Stack>\n      </>\n    );\n  }\n}\n\nexport default DestinationRuleOverview;\n"]},"metadata":{},"sourceType":"module"}