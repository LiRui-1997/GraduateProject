{"ast":null,"code":"import _classCallCheck from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/root/kiali-ui/src/pages/IstioConfigNew/AuthorizationPolicyForm/RuleList.tsx\";\nimport * as React from 'react';\nimport { cellWidth, Table, TableBody, TableHeader } from '@patternfly/react-table';\nimport { style } from 'typestyle';\nimport { PFColors } from '../../../components/Pf/PfColors';\nvar headerCells = [{\n  title: 'From',\n  transforms: [cellWidth(40)],\n  props: {}\n}, {\n  title: 'To',\n  transforms: [cellWidth(40)],\n  props: {}\n}, {\n  title: 'When',\n  transforms: [cellWidth(40)],\n  props: {}\n}, {\n  title: '',\n  props: {}\n}];\nvar rulesPadding = style({\n  paddingLeft: 10\n});\nvar noRulesStyle = style({\n  marginTop: 10,\n  color: PFColors.Red100,\n  textAlign: 'center',\n  width: '100%'\n});\n\nvar RuleList = /*#__PURE__*/function (_React$Component) {\n  _inherits(RuleList, _React$Component);\n\n  var _super = _createSuper(RuleList);\n\n  function RuleList() {\n    var _this;\n\n    _classCallCheck(this, RuleList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.rows = function () {\n      return _this.props.ruleList.map(function (rule, i) {\n        return {\n          key: 'rule' + i,\n          cells: [/*#__PURE__*/React.createElement(React.Fragment, null, rule.from.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(React.Fragment, null, rule.from.map(function (fromItem, i) {\n            var keys = Object.keys(fromItem);\n            return /*#__PURE__*/React.createElement(\"div\", {\n              id: 'from' + i,\n              className: rulesPadding,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 23\n              }\n            }, /*#__PURE__*/React.createElement(\"span\", {\n              style: {\n                marginRight: 20\n              },\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 25\n              }\n            }, \"source:\"), keys.map(function (k, j) {\n              return /*#__PURE__*/React.createElement(\"span\", {\n                id: 'fromField' + i + '_' + j,\n                __self: _assertThisInitialized(_this),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 29\n                }\n              }, /*#__PURE__*/React.createElement(\"b\", {\n                __self: _assertThisInitialized(_this),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 64,\n                  columnNumber: 31\n                }\n              }, k), \": [\", fromItem[k].join(','), \"]\", j < keys.length - 1 ? ' and ' : '');\n            }));\n          })))), /*#__PURE__*/React.createElement(React.Fragment, null, rule.to.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, rule.to.map(function (toItem, i) {\n            var keys = Object.keys(toItem);\n            return /*#__PURE__*/React.createElement(\"div\", {\n              id: 'to' + i,\n              className: rulesPadding,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"span\", {\n              style: {\n                marginRight: 20\n              },\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 23\n              }\n            }, \"operation:\"), keys.map(function (k, j) {\n              return /*#__PURE__*/React.createElement(\"span\", {\n                id: 'toItem' + i + '_' + j,\n                __self: _assertThisInitialized(_this),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 27\n                }\n              }, /*#__PURE__*/React.createElement(\"b\", {\n                __self: _assertThisInitialized(_this),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 29\n                }\n              }, k), \": [\", toItem[k].join(','), \"]\", j < keys.length - 1 ? ' and ' : '');\n            }));\n          }))), /*#__PURE__*/React.createElement(React.Fragment, null, rule.when.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, rule.when.map(function (whenItem, i) {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              id: 'when' + i,\n              className: rulesPadding,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"span\", {\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 23\n              }\n            }, /*#__PURE__*/React.createElement(\"b\", {\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 25\n              }\n            }, \"key\"), \": [\", whenItem.key, \"]\"), /*#__PURE__*/React.createElement(\"span\", {\n              style: {\n                marginLeft: 5\n              },\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 23\n              }\n            }, /*#__PURE__*/React.createElement(\"b\", {\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 25\n              }\n            }, \"values:\"), \" [\", whenItem.values, \"]\"), /*#__PURE__*/React.createElement(\"span\", {\n              style: {\n                marginLeft: 5\n              },\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 23\n              }\n            }, /*#__PURE__*/React.createElement(\"b\", {\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 25\n              }\n            }, \"notValues:\"), \" [\", whenItem.notValues, \"]\"));\n          }))), /*#__PURE__*/React.createElement(React.Fragment, null)]\n        };\n      });\n    };\n\n    _this.actionResolver = function (rowData, _ref) {\n      var rowIndex = _ref.rowIndex;\n      var removeAction = {\n        title: 'Remove Rule',\n        // @ts-ignore\n        onClick: function onClick(event, rowIndex, rowData, extraData) {\n          _this.props.onRemoveRule(rowIndex);\n        }\n      };\n      return [removeAction];\n    };\n\n    return _this;\n  }\n\n  _createClass(RuleList, [{\n    key: \"render\",\n    value: function render() {\n      var noRulesMessage = this.props.action === 'DENY' ? ' DENY action requires at least one Rule' : 'No Rules Defined.';\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Table, {\n        \"aria-label\": \"Source Builder\",\n        cells: headerCells,\n        rows: this.rows() // @ts-ignore\n        ,\n        actionResolver: this.actionResolver,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(TableHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(TableBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }\n      })), this.props.ruleList.length === 0 && /*#__PURE__*/React.createElement(\"div\", {\n        className: noRulesStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 46\n        }\n      }, noRulesMessage));\n    }\n  }]);\n\n  return RuleList;\n}(React.Component);\n\nexport default RuleList;","map":{"version":3,"sources":["/root/kiali-ui/src/pages/IstioConfigNew/AuthorizationPolicyForm/RuleList.tsx"],"names":["React","cellWidth","Table","TableBody","TableHeader","style","PFColors","headerCells","title","transforms","props","rulesPadding","paddingLeft","noRulesStyle","marginTop","color","Red100","textAlign","width","RuleList","rows","ruleList","map","rule","i","key","cells","from","length","fromItem","keys","Object","marginRight","k","j","join","to","toItem","when","whenItem","marginLeft","values","notValues","actionResolver","rowData","rowIndex","removeAction","onClick","event","extraData","onRemoveRule","noRulesMessage","action","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Rule } from './RuleBuilder';\nimport { cellWidth, ICell, Table, TableBody, TableHeader } from '@patternfly/react-table';\nimport { style } from 'typestyle';\nimport { PFColors } from '../../../components/Pf/PfColors';\n\ntype Props = {\n  action: string;\n  ruleList: Rule[];\n  onRemoveRule: (index: number) => void;\n};\n\nconst headerCells: ICell[] = [\n  {\n    title: 'From',\n    transforms: [cellWidth(40) as any],\n    props: {}\n  },\n  {\n    title: 'To',\n    transforms: [cellWidth(40) as any],\n    props: {}\n  },\n  {\n    title: 'When',\n    transforms: [cellWidth(40) as any],\n    props: {}\n  },\n  {\n    title: '',\n    props: {}\n  }\n];\n\nconst rulesPadding = style({\n  paddingLeft: 10\n});\n\nconst noRulesStyle = style({\n  marginTop: 10,\n  color: PFColors.Red100,\n  textAlign: 'center',\n  width: '100%'\n});\n\nclass RuleList extends React.Component<Props> {\n  rows = () => {\n    return this.props.ruleList.map((rule, i) => {\n      return {\n        key: 'rule' + i,\n        cells: [\n          <>\n            {rule.from.length > 0 && (\n              <>\n                <>\n                  {rule.from.map((fromItem, i) => {\n                    const keys = Object.keys(fromItem);\n                    return (\n                      <div id={'from' + i} className={rulesPadding}>\n                        <span style={{ marginRight: 20 }}>source:</span>\n                        {keys.map((k, j) => {\n                          return (\n                            <span id={'fromField' + i + '_' + j}>\n                              <b>{k}</b>: [{fromItem[k].join(',')}]{j < keys.length - 1 ? ' and ' : ''}\n                            </span>\n                          );\n                        })}\n                      </div>\n                    );\n                  })}\n                </>\n              </>\n            )}\n          </>,\n          <>\n            {rule.to.length > 0 && (\n              <>\n                {rule.to.map((toItem, i) => {\n                  const keys = Object.keys(toItem);\n                  return (\n                    <div id={'to' + i} className={rulesPadding}>\n                      <span style={{ marginRight: 20 }}>operation:</span>\n                      {keys.map((k, j) => {\n                        return (\n                          <span id={'toItem' + i + '_' + j}>\n                            <b>{k}</b>: [{toItem[k].join(',')}]{j < keys.length - 1 ? ' and ' : ''}\n                          </span>\n                        );\n                      })}\n                    </div>\n                  );\n                })}\n              </>\n            )}\n          </>,\n          <>\n            {rule.when.length > 0 && (\n              <>\n                {rule.when.map((whenItem, i) => {\n                  return (\n                    <div id={'when' + i} className={rulesPadding}>\n                      <span>\n                        <b>key</b>: [{whenItem.key}]\n                      </span>\n                      <span style={{ marginLeft: 5 }}>\n                        <b>values:</b> [{whenItem.values}]\n                      </span>\n                      <span style={{ marginLeft: 5 }}>\n                        <b>notValues:</b> [{whenItem.notValues}]\n                      </span>\n                    </div>\n                  );\n                })}\n              </>\n            )}\n          </>,\n          <></>\n        ]\n      };\n    });\n  };\n\n  // @ts-ignore\n  actionResolver = (rowData, { rowIndex }) => {\n    const removeAction = {\n      title: 'Remove Rule',\n      // @ts-ignore\n      onClick: (event, rowIndex, rowData, extraData) => {\n        this.props.onRemoveRule(rowIndex);\n      }\n    };\n    return [removeAction];\n  };\n\n  render() {\n    const noRulesMessage =\n      this.props.action === 'DENY' ? ' DENY action requires at least one Rule' : 'No Rules Defined.';\n    return (\n      <>\n        <Table\n          aria-label=\"Source Builder\"\n          cells={headerCells}\n          rows={this.rows()}\n          // @ts-ignore\n          actionResolver={this.actionResolver}\n        >\n          <TableHeader />\n          <TableBody />\n        </Table>\n        {this.props.ruleList.length === 0 && <div className={noRulesStyle}>{noRulesMessage}</div>}\n      </>\n    );\n  }\n}\n\nexport default RuleList;\n"]},"metadata":{},"sourceType":"module"}