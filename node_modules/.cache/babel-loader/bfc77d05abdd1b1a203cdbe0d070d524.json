{"ast":null,"code":"import _classCallCheck from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/root/kiali-ui/src/components/Details/DetailDescription.tsx\";\nimport * as React from 'react';\nimport { PopoverPosition, Tooltip, TooltipPosition } from '@patternfly/react-core';\nimport { style } from 'typestyle';\nimport { Link } from 'react-router-dom';\nimport MissingSidecar from '../MissingSidecar/MissingSidecar';\nimport { renderTrafficStatus } from '../Health/HealthDetails';\nimport { createIcon } from '../Health/Helper';\nimport { PFBadge, PFBadges } from '../Pf/PfBadges';\nvar iconStyle = style({\n  margin: '0 0 0 0',\n  padding: '0 0 0 0',\n  display: 'inline-block'\n});\nvar resourceListStyle = style({\n  margin: '0px 0 11px 0'\n});\nvar titleStyle = style({\n  margin: '15px 0 8px 0'\n});\n\nvar DetailDescription = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(DetailDescription, _React$PureComponent);\n\n  var _super = _createSuper(DetailDescription);\n\n  function DetailDescription() {\n    _classCallCheck(this, DetailDescription);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(DetailDescription, [{\n    key: \"renderAppItem\",\n    value: function renderAppItem(namespace, appName) {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: \"App_\".concat(appName),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        key: \"service-icon\",\n        className: iconStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(PFBadge, {\n        badge: PFBadges.App,\n        position: TooltipPosition.top,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: '/namespaces/' + namespace + '/applications/' + appName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }\n      }, appName)));\n    }\n  }, {\n    key: \"renderServiceItem\",\n    value: function renderServiceItem(namespace, serviceName) {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: \"Service_\".concat(serviceName),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        key: \"service-icon\",\n        className: iconStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(PFBadge, {\n        badge: PFBadges.Service,\n        position: TooltipPosition.top,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: '/namespaces/' + namespace + '/services/' + serviceName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }\n      }, serviceName)));\n    }\n  }, {\n    key: \"renderEmptyItem\",\n    value: function renderEmptyItem(type) {\n      var message = 'No ' + type + ' found';\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 12\n        }\n      }, \" \", message, \" \");\n    }\n  }, {\n    key: \"appList\",\n    value: function appList() {\n      var _this = this;\n\n      var applicationList = this.props.apps && this.props.apps.length > 0 ? this.props.apps.sort(function (a1, a2) {\n        return a1 < a2 ? -1 : 1;\n      }).map(function (name) {\n        return _this.renderAppItem(_this.props.namespace, name);\n      }) : this.renderEmptyItem('applications');\n      return [/*#__PURE__*/React.createElement(\"div\", {\n        className: resourceListStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        id: \"app-list\",\n        style: {\n          listStyleType: 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }\n      }, applicationList))];\n    }\n  }, {\n    key: \"renderWorkloadItem\",\n    value: function renderWorkloadItem(workload) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: 'WorkloadItem_' + workload.workloadName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: iconStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(PFBadge, {\n        badge: PFBadges.Workload,\n        position: TooltipPosition.top,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(Link, {\n        to: '/namespaces/' + this.props.namespace + '/workloads/' + workload.workloadName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }\n      }, workload.workloadName), !workload.istioSidecar && /*#__PURE__*/React.createElement(MissingSidecar, {\n        namespace: this.props.namespace,\n        tooltip: true,\n        style: {\n          marginLeft: '10px'\n        },\n        text: '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }\n      }));\n    }\n  }, {\n    key: \"renderWorkloadHealthItem\",\n    value: function renderWorkloadHealthItem(sub) {\n      var workload = undefined;\n\n      if (this.props.workloads && this.props.workloads.length > 0) {\n        for (var i = 0; i < this.props.workloads.length; i++) {\n          var hWorkload = sub.text.substr(0, sub.text.indexOf(':'));\n\n          if (hWorkload === this.props.workloads[i].workloadName) {\n            workload = this.props.workloads[i];\n            break;\n          }\n        }\n      }\n\n      if (workload) {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          key: 'WorkloadItem_' + workload.workloadName,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          key: \"service-icon\",\n          className: iconStyle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(PFBadge, {\n          badge: PFBadges.Workload,\n          position: TooltipPosition.top,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }\n        })), /*#__PURE__*/React.createElement(Link, {\n          to: '/namespaces/' + this.props.namespace + '/workloads/' + workload.workloadName,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 11\n          }\n        }, workload.workloadName), /*#__PURE__*/React.createElement(Tooltip, {\n          \"aria-label\": 'Health indicator',\n          content: /*#__PURE__*/React.createElement(React.Fragment, null, sub.text),\n          position: PopoverPosition.auto,\n          className: 'health_indicator',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            marginLeft: '10px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }\n        }, createIcon(sub.status))), !workload.istioSidecar && /*#__PURE__*/React.createElement(MissingSidecar, {\n          namespace: this.props.namespace,\n          tooltip: true,\n          style: {\n            marginLeft: '10px'\n          },\n          text: '',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }\n        }));\n      } else {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          key: 'WorkloadItem_' + sub.text,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            marginRight: '10px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 11\n          }\n        }, createIcon(sub.status)), sub.text);\n      }\n    }\n  }, {\n    key: \"renderWorkloadStatus\",\n    value: function renderWorkloadStatus() {\n      var _this2 = this;\n\n      if (this.props.health) {\n        var item = this.props.health.getWorkloadStatus();\n\n        if (item) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 11\n            }\n          }, item.text, item.children && /*#__PURE__*/React.createElement(\"ul\", {\n            id: \"workload-list\",\n            style: {\n              listStyleType: 'none'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }\n          }, item.children.map(function (sub, subIdx) {\n            return /*#__PURE__*/React.createElement(\"li\", {\n              key: subIdx,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 26\n              }\n            }, _this2.renderWorkloadHealthItem(sub));\n          })));\n        } else {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"ul\", {\n            id: \"workload-list\",\n            style: {\n              listStyleType: 'none'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 13\n            }\n          }, this.props.workloads ? this.props.workloads.sort(function (w1, w2) {\n            return w1.workloadName < w2.workloadName ? -1 : 1;\n          }).map(function (wkd, subIdx) {\n            return /*#__PURE__*/React.createElement(\"li\", {\n              key: subIdx,\n              __self: _this2,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 30\n              }\n            }, _this2.renderWorkloadItem(wkd));\n          }) : undefined));\n        }\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"workloadSummary\",\n    value: function workloadSummary() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: resourceListStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 12\n        }\n      }, this.renderWorkloadStatus());\n    }\n  }, {\n    key: \"serviceList\",\n    value: function serviceList() {\n      var _this3 = this;\n\n      var serviceList = this.props.services && this.props.services.length > 0 ? this.props.services.sort(function (s1, s2) {\n        return s1 < s2 ? -1 : 1;\n      }).map(function (name) {\n        return _this3.renderServiceItem(_this3.props.namespace, name);\n      }) : this.renderEmptyItem('services');\n      return [/*#__PURE__*/React.createElement(\"div\", {\n        className: resourceListStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        id: \"service-list\",\n        style: {\n          listStyleType: 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 9\n        }\n      }, serviceList))];\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: titleStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 9\n        }\n      }), this.props.apps !== undefined && this.appList(), this.props.workloads !== undefined && this.workloadSummary(), this.props.services !== undefined && this.serviceList(), this.props.health && renderTrafficStatus(this.props.health));\n    }\n  }]);\n\n  return DetailDescription;\n}(React.PureComponent);\n\nexport default DetailDescription;","map":{"version":3,"sources":["/root/kiali-ui/src/components/Details/DetailDescription.tsx"],"names":["React","PopoverPosition","Tooltip","TooltipPosition","style","Link","MissingSidecar","renderTrafficStatus","createIcon","PFBadge","PFBadges","iconStyle","margin","padding","display","resourceListStyle","titleStyle","DetailDescription","namespace","appName","App","top","serviceName","Service","type","message","applicationList","props","apps","length","sort","a1","a2","map","name","renderAppItem","renderEmptyItem","listStyleType","workload","workloadName","Workload","istioSidecar","marginLeft","sub","undefined","workloads","i","hWorkload","text","substr","indexOf","auto","status","marginRight","health","item","getWorkloadStatus","children","subIdx","renderWorkloadHealthItem","w1","w2","wkd","renderWorkloadItem","renderWorkloadStatus","serviceList","services","s1","s2","renderServiceItem","appList","workloadSummary","PureComponent"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { AppWorkload } from '../../types/App';\nimport { PopoverPosition, Tooltip, TooltipPosition } from '@patternfly/react-core';\nimport { style } from 'typestyle';\nimport { Link } from 'react-router-dom';\nimport MissingSidecar from '../MissingSidecar/MissingSidecar';\nimport * as H from '../../types/Health';\nimport { HealthSubItem } from '../../types/Health';\nimport { renderTrafficStatus } from '../Health/HealthDetails';\nimport { createIcon } from '../Health/Helper';\nimport { PFBadge, PFBadges } from '../Pf/PfBadges';\n\ntype Props = {\n  namespace: string;\n  apps?: string[];\n  workloads?: AppWorkload[];\n  services?: string[];\n  health?: H.Health;\n};\n\nconst iconStyle = style({\n  margin: '0 0 0 0',\n  padding: '0 0 0 0',\n  display: 'inline-block'\n});\n\nconst resourceListStyle = style({\n  margin: '0px 0 11px 0'\n});\n\nconst titleStyle = style({\n  margin: '15px 0 8px 0'\n});\n\nclass DetailDescription extends React.PureComponent<Props> {\n  private renderAppItem(namespace: string, appName: string) {\n    return (\n      <li key={`App_${appName}`}>\n        <div key=\"service-icon\" className={iconStyle}>\n          <PFBadge badge={PFBadges.App} position={TooltipPosition.top} />\n        </div>\n        <span>\n          <Link to={'/namespaces/' + namespace + '/applications/' + appName}>{appName}</Link>\n        </span>\n      </li>\n    );\n  }\n\n  private renderServiceItem(namespace: string, serviceName: string) {\n    return (\n      <li key={`Service_${serviceName}`}>\n        <div key=\"service-icon\" className={iconStyle}>\n          <PFBadge badge={PFBadges.Service} position={TooltipPosition.top} />\n        </div>\n        <span>\n          <Link to={'/namespaces/' + namespace + '/services/' + serviceName}>{serviceName}</Link>\n        </span>\n      </li>\n    );\n  }\n\n  private renderEmptyItem(type: string) {\n    const message = 'No ' + type + ' found';\n    return <div> {message} </div>;\n  }\n\n  private appList() {\n    const applicationList =\n      this.props.apps && this.props.apps.length > 0\n        ? this.props.apps\n            .sort((a1: string, a2: string) => (a1 < a2 ? -1 : 1))\n            .map(name => this.renderAppItem(this.props.namespace, name))\n        : this.renderEmptyItem('applications');\n\n    return [\n      <div className={resourceListStyle}>\n        <ul id=\"app-list\" style={{ listStyleType: 'none' }}>\n          {applicationList}\n        </ul>\n      </div>\n    ];\n  }\n\n  private renderWorkloadItem(workload: AppWorkload) {\n    return (\n      <span key={'WorkloadItem_' + workload.workloadName}>\n        <div className={iconStyle}>\n          <PFBadge badge={PFBadges.Workload} position={TooltipPosition.top} />\n        </div>\n        <Link to={'/namespaces/' + this.props.namespace + '/workloads/' + workload.workloadName}>\n          {workload.workloadName}\n        </Link>\n        {!workload.istioSidecar && (\n          <MissingSidecar namespace={this.props.namespace} tooltip={true} style={{ marginLeft: '10px' }} text={''} />\n        )}\n      </span>\n    );\n  }\n\n  private renderWorkloadHealthItem(sub: HealthSubItem) {\n    let workload: AppWorkload | undefined = undefined;\n    if (this.props.workloads && this.props.workloads.length > 0) {\n      for (let i = 0; i < this.props.workloads.length; i++) {\n        const hWorkload = sub.text.substr(0, sub.text.indexOf(':'));\n        if (hWorkload === this.props.workloads[i].workloadName) {\n          workload = this.props.workloads[i];\n          break;\n        }\n      }\n    }\n    if (workload) {\n      return (\n        <span key={'WorkloadItem_' + workload.workloadName}>\n          <div key=\"service-icon\" className={iconStyle}>\n            <PFBadge badge={PFBadges.Workload} position={TooltipPosition.top} />\n          </div>\n          <Link to={'/namespaces/' + this.props.namespace + '/workloads/' + workload.workloadName}>\n            {workload.workloadName}\n          </Link>\n          <Tooltip\n            aria-label={'Health indicator'}\n            content={<>{sub.text}</>}\n            position={PopoverPosition.auto}\n            className={'health_indicator'}\n          >\n            <span style={{ marginLeft: '10px' }}>{createIcon(sub.status)}</span>\n          </Tooltip>\n          {!workload.istioSidecar && (\n            <MissingSidecar namespace={this.props.namespace} tooltip={true} style={{ marginLeft: '10px' }} text={''} />\n          )}\n        </span>\n      );\n    } else {\n      return (\n        <span key={'WorkloadItem_' + sub.text}>\n          <span style={{ marginRight: '10px' }}>{createIcon(sub.status)}</span>\n          {sub.text}\n        </span>\n      );\n    }\n  }\n\n  private renderWorkloadStatus() {\n    if (this.props.health) {\n      const item = this.props.health.getWorkloadStatus();\n      if (item) {\n        return (\n          <div>\n            {item.text}\n            {item.children && (\n              <ul id=\"workload-list\" style={{ listStyleType: 'none' }}>\n                {item.children.map((sub, subIdx) => {\n                  return <li key={subIdx}>{this.renderWorkloadHealthItem(sub)}</li>;\n                })}\n              </ul>\n            )}\n          </div>\n        );\n      } else {\n        return (\n          <div>\n            <ul id=\"workload-list\" style={{ listStyleType: 'none' }}>\n              {this.props.workloads\n                ? this.props.workloads\n                    .sort((w1: AppWorkload, w2: AppWorkload) => (w1.workloadName < w2.workloadName ? -1 : 1))\n                    .map((wkd, subIdx) => {\n                      return <li key={subIdx}>{this.renderWorkloadItem(wkd)}</li>;\n                    })\n                : undefined}\n            </ul>\n          </div>\n        );\n      }\n    }\n    return undefined;\n  }\n\n  private workloadSummary() {\n    return <div className={resourceListStyle}>{this.renderWorkloadStatus()}</div>;\n  }\n\n  private serviceList() {\n    const serviceList =\n      this.props.services && this.props.services.length > 0\n        ? this.props.services\n            .sort((s1: string, s2: string) => (s1 < s2 ? -1 : 1))\n            .map(name => this.renderServiceItem(this.props.namespace, name))\n        : this.renderEmptyItem('services');\n\n    return [\n      <div className={resourceListStyle}>\n        <ul id=\"service-list\" style={{ listStyleType: 'none' }}>\n          {serviceList}\n        </ul>\n      </div>\n    ];\n  }\n\n  render() {\n    return (\n      <>\n        <div className={titleStyle}></div>\n        {this.props.apps !== undefined && this.appList()}\n        {this.props.workloads !== undefined && this.workloadSummary()}\n        {this.props.services !== undefined && this.serviceList()}\n        {this.props.health && renderTrafficStatus(this.props.health)}\n      </>\n    );\n  }\n}\n\nexport default DetailDescription;\n"]},"metadata":{},"sourceType":"module"}