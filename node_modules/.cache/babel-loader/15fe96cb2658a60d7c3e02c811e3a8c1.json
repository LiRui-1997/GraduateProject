{"ast":null,"code":"import _classCallCheck from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _jsxFileName = \"/root/GraduateProject/src/components/DurationDropdown/DurationDropdown.tsx\",\n    _this2 = this;\n\nimport ToolbarDropdown from '../ToolbarDropdown/ToolbarDropdown';\nimport { serverConfig, humanDurations } from '../../config/ServerConfig';\nimport * as React from 'react';\nimport { durationSelector } from '../../store/Selectors';\nimport { bindActionCreators } from 'redux';\nimport { UserSettingsActions } from '../../actions/UserSettingsActions';\nimport { connect } from 'react-redux';\nimport { HistoryManager, URLParam } from '../../app/History';\nimport history from '../../app/History';\nexport var DurationDropdown = /*#__PURE__*/function (_React$Component) {\n  _inherits(DurationDropdown, _React$Component);\n\n  var _super = _createSuper(DurationDropdown);\n\n  function DurationDropdown() {\n    _classCallCheck(this, DurationDropdown);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(DurationDropdown, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var durations = humanDurations(serverConfig, this.props.prefix, this.props.suffix);\n      return /*#__PURE__*/React.createElement(ToolbarDropdown, {\n        id: this.props.id,\n        disabled: this.props.disabled,\n        handleSelect: function handleSelect(key) {\n          return _this.props.setDuration(Number(key));\n        },\n        value: String(this.props.duration),\n        label: durations[this.props.duration],\n        options: durations,\n        tooltip: this.props.tooltip,\n        tooltipBottom: this.props.tooltipBottom,\n        nameDropdown: this.props.nameDropdown,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return DurationDropdown;\n}(React.Component);\nexport var withDurations = function withDurations(DurationDropdownComponent) {\n  return function (props) {\n    return /*#__PURE__*/React.createElement(DurationDropdownComponent, Object.assign({\n      durations: humanDurations(serverConfig, props.prefix, props.suffix)\n    }, props, {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    }));\n  };\n};\nexport var withURLAwareness = function withURLAwareness(DurationDropdownComponent) {\n  return /*#__PURE__*/function (_React$Component2) {\n    _inherits(_class, _React$Component2);\n\n    var _super2 = _createSuper(_class);\n\n    function _class(props) {\n      var _this3;\n\n      _classCallCheck(this, _class);\n\n      _this3 = _super2.call(this, props);\n      var urlParams = new URLSearchParams(history.location.search);\n      var urlDuration = HistoryManager.getDuration(urlParams);\n\n      if (urlDuration !== undefined && urlDuration !== props.duration) {\n        props.setDuration(urlDuration);\n      }\n\n      HistoryManager.setParam(URLParam.DURATION, String(_this3.props.duration));\n      return _this3;\n    }\n\n    _createClass(_class, [{\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate() {\n        HistoryManager.setParam(URLParam.DURATION, String(this.props.duration));\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return /*#__PURE__*/React.createElement(DurationDropdownComponent, Object.assign({}, this.props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 14\n          }\n        }));\n      }\n    }]);\n\n    return _class;\n  }(React.Component);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    duration: durationSelector(state)\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setDuration: bindActionCreators(UserSettingsActions.setDuration, dispatch)\n  };\n};\n\nexport var DurationDropdownContainer = connect(mapStateToProps, mapDispatchToProps)(withURLAwareness(withDurations(DurationDropdown)));","map":{"version":3,"sources":["/root/GraduateProject/src/components/DurationDropdown/DurationDropdown.tsx"],"names":["ToolbarDropdown","serverConfig","humanDurations","React","durationSelector","bindActionCreators","UserSettingsActions","connect","HistoryManager","URLParam","history","DurationDropdown","durations","props","prefix","suffix","id","disabled","key","setDuration","Number","String","duration","tooltip","tooltipBottom","nameDropdown","Component","withDurations","DurationDropdownComponent","withURLAwareness","urlParams","URLSearchParams","location","search","urlDuration","getDuration","undefined","setParam","DURATION","mapStateToProps","state","mapDispatchToProps","dispatch","DurationDropdownContainer"],"mappings":"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","sourcesContent":["import ToolbarDropdown from '../ToolbarDropdown/ToolbarDropdown';\nimport { serverConfig, humanDurations } from '../../config/ServerConfig';\nimport * as React from 'react';\nimport { DurationInSeconds } from '../../types/Common';\nimport { KialiAppState } from '../../store/Store';\nimport { durationSelector } from '../../store/Selectors';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { KialiAppAction } from '../../actions/KialiAppAction';\nimport { bindActionCreators } from 'redux';\nimport { UserSettingsActions } from '../../actions/UserSettingsActions';\nimport { connect } from 'react-redux';\nimport { HistoryManager, URLParam } from '../../app/History';\nimport history from '../../app/History';\n\ntype ReduxProps = {\n  duration: DurationInSeconds;\n  setDuration: (duration: DurationInSeconds) => void;\n};\n\ntype DurationDropdownProps = ReduxProps & {\n  id: string;\n  disabled?: boolean;\n  tooltip?: string;\n  tooltipBottom?: boolean;\n  nameDropdown?: string;\n  suffix?: string;\n  prefix?: string;\n};\n\nexport class DurationDropdown extends React.Component<DurationDropdownProps> {\n  render() {\n    const durations = humanDurations(serverConfig, this.props.prefix, this.props.suffix);\n\n    return (\n      <ToolbarDropdown\n        id={this.props.id}\n        disabled={this.props.disabled}\n        handleSelect={key => this.props.setDuration(Number(key))}\n        value={String(this.props.duration)}\n        label={durations[this.props.duration]}\n        options={durations}\n        tooltip={this.props.tooltip}\n        tooltipBottom={this.props.tooltipBottom}\n        nameDropdown={this.props.nameDropdown}\n      />\n    );\n  }\n}\n\nexport const withDurations = DurationDropdownComponent => {\n  return (props: DurationDropdownProps) => {\n    return (\n      <DurationDropdownComponent durations={humanDurations(serverConfig, props.prefix, props.suffix)} {...props} />\n    );\n  };\n};\n\nexport const withURLAwareness = DurationDropdownComponent => {\n  return class extends React.Component<DurationDropdownProps> {\n    constructor(props: DurationDropdownProps) {\n      super(props);\n      const urlParams = new URLSearchParams(history.location.search);\n      const urlDuration = HistoryManager.getDuration(urlParams);\n      if (urlDuration !== undefined && urlDuration !== props.duration) {\n        props.setDuration(urlDuration);\n      }\n      HistoryManager.setParam(URLParam.DURATION, String(this.props.duration));\n    }\n\n    componentDidUpdate() {\n      HistoryManager.setParam(URLParam.DURATION, String(this.props.duration));\n    }\n\n    render() {\n      return <DurationDropdownComponent {...this.props} />;\n    }\n  };\n};\n\nconst mapStateToProps = (state: KialiAppState) => ({\n  duration: durationSelector(state)\n});\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<KialiAppState, void, KialiAppAction>) => {\n  return {\n    setDuration: bindActionCreators(UserSettingsActions.setDuration, dispatch)\n  };\n};\n\nexport const DurationDropdownContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withURLAwareness(withDurations(DurationDropdown)));\n"]},"metadata":{},"sourceType":"module"}