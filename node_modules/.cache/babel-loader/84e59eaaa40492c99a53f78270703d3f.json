{"ast":null,"code":"import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Plugins from './plugins';\nimport StylePlugin from './plugins/StylePlugin';\nimport ArrayPlugin from './plugins/ArrayPlugin';\nimport GradientsPlugin from './plugins/GradientsPlugin';\nimport Ticker from './animate/ticker';\nimport Timeline from './animate/timeline';\nimport Animate from './animate/animate';\nimport { getInitProps, dataToArray, initAnimProps, flatArray } from './utils';\nimport ticker from './animate/ticker';\nPlugins.push(ArrayPlugin);\nPlugins.push(GradientsPlugin);\nPlugins.push(StylePlugin);\nvar tweenId = 0;\nvar globalTimeline = new Timeline();\n\nvar Tween = /*#__PURE__*/function () {\n  function Tween(targets, _props) {\n    var _this = this;\n\n    _classCallCheck(this, Tween);\n\n    this.targets = void 0;\n    this.props = void 0;\n    this.timeline = void 0;\n    this.animate = void 0;\n    this.$reverse = false;\n    this.vars = [];\n    this.initTime = void 0;\n    this.attr = void 0;\n\n    this.init = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(vars) {\n        var props;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                props = getInitProps(vars);\n\n                if (_this.targets[0].tagName && !_this.attr) {\n                  props.animation = dataToArray(props.animation).map(function (item) {\n                    var c = {\n                      style: {}\n                    };\n\n                    for (var k in item) {\n                      //Object.keys(item).forEach(k => {\n                      if (k in Plugins || k in initAnimProps) {\n                        c[k] = item[k];\n                      } else {\n                        c.style[k] = item[k];\n                      } //});\n\n                    }\n\n                    if (!Object.keys(c.style).length) {\n                      delete c.style;\n                    } // 时间去掉小数点;\n\n\n                    if (item.duration) {\n                      item.duration = Math.round(item.duration);\n                    }\n\n                    if (item.delay) {\n                      item.delay = Math.round(item.delay);\n                    }\n\n                    if (item.appearTo) {\n                      item.appearTo = Math.round(item.appearTo);\n                    }\n\n                    if (item.repeatDelay) {\n                      item.repeatDelay = Math.round(item.repeatDelay);\n                    }\n\n                    return c;\n                  });\n                }\n\n                _this.animate = new Animate(props);\n                _this.animate.id = \"TweenOne_\".concat(tweenId);\n                tweenId++;\n                _this.animate.startTime = _this.initTime;\n                _this.animate.onChangeChild = _this.onChange;\n                _this.animate.onChangeTimeline = _this.onChangeTimeline;\n                _this.animate.root = _this;\n                _this.animate.parent = _this.timeline;\n\n                _this.animate.init();\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.renderToDom = function () {\n      // vars.forEach((item, i) => {\n      for (var i = 0; i < _this.vars.length; i++) {\n        var item = _this.vars[i]; // Object.keys(item).forEach((key: string) => {\n\n        for (var key in item) {\n          var value = item[key];\n          var target = _this.targets[i];\n\n          if (!target) {\n            continue;\n          }\n\n          if (_this.props.attr && target.tagName && target.setAttribute) {\n            if (key === 'style') {\n              // Object.keys(value).forEach(key => {\n              for (var ck in value) {\n                target.style[ck] = value[key];\n              } // });\n\n            }\n\n            target.setAttribute(key, value);\n          } else if (key in Plugins && target.tagName) {\n            var $key = Plugins[key].key;\n\n            if (typeof target[$key] === 'function') {\n              target[$key](value.attr, value.path);\n            } else if ($key && _typeof(value) === 'object') {\n              //Object.keys(value).forEach(ck => {\n              for (var _ck in value) {\n                var va = value[_ck];\n                target[$key][_ck] = va.text || va;\n              } //});\n\n            } else if ($key) {\n              target[$key] = value;\n            }\n          } else {\n            target[key] = value;\n          } // });\n\n        }\n      } //});\n\n    };\n\n    this.onChange = function (e) {\n      if (e.mode === 'onComplete' && e.render) {\n        _this.renderToDom();\n      }\n\n      if (e.mode && _this.props.onChange && !e.silence) {\n        e.targets = flatArray(e.targets);\n        e.vars = flatArray(e.vars);\n\n        _this.props.onChange(e);\n      }\n    };\n\n    this.onChangeTimeline = function (e) {\n      _this.renderToDom();\n\n      if (e.mode && _this.props.onChangeTimeline) {\n        e.targets = flatArray(e.targets);\n        e.vars = flatArray(_this.vars);\n\n        _this.props.onChangeTimeline(e);\n      }\n    };\n\n    this.goto = function (moment, paused) {\n      _this.targets.forEach(function (item) {\n        if (!item) {\n          return;\n        }\n\n        Object.keys(item._tweenOneVars || {}).forEach(function (key) {\n          delete item._tweenOneVars[key];\n        });\n      });\n\n      _this.animate.goto(moment, paused);\n    };\n\n    this.kill = function (index) {\n      _this.animate.kill(index);\n    };\n\n    this.targets = targets;\n    this.props = _props;\n    this.timeline = globalTimeline;\n    this.initTime = Ticker.time;\n    this.attr = _props.attr;\n    targets.forEach(function (item) {\n      _this.vars.push(item._tweenOneVars);\n    });\n    this.init(_props);\n  }\n\n  _createClass(Tween, [{\n    key: \"paused\",\n    get: function get() {\n      return this.animate.pausedState;\n    },\n    set: function set(v) {\n      this.animate.paused(v);\n    }\n  }, {\n    key: \"reverse\",\n    get: function get() {\n      return this.$reverse;\n    },\n    set: function set(v) {\n      this.$reverse = v;\n      this.animate.reverse(v);\n    }\n  }, {\n    key: \"regionStartTime\",\n    get: function get() {\n      return this.animate.regionStartTime;\n    },\n    set: function set(v) {\n      this.animate.regionStartTime = v;\n      this.animate.setTotalTime();\n    }\n  }, {\n    key: \"regionEndTime\",\n    get: function get() {\n      return this.animate.regionEndTime || this.animate.totalTime;\n    },\n    set: function set(v) {\n      this.animate.regionEndTime = v;\n      this.animate.setTotalTime();\n    }\n  }]);\n\n  return Tween;\n}();\n\nvar TweenOne = function TweenOne(targets, vars) {\n  if (!targets) {\n    return console.error(\"Error: targets is undefined.\");\n  }\n\n  if (ticker.state !== 'wake') {\n    // 先将 ticker 唤醒，避免同时添加时 initTime 出错；\n    ticker.wake();\n  }\n\n  var t = dataToArray(targets).map(function (item) {\n    item._tweenOneVars = item._tweenOneVars || {};\n    return item;\n  }); // 分解 targets 里的元素类型\n\n  var doms = t.filter(function (c) {\n    return c.tagName;\n  });\n  var objs = t.filter(function (c) {\n    return !c.tagName;\n  });\n  var tween = [];\n\n  if (doms.length) {\n    tween.push(new Tween(doms, vars));\n  }\n\n  if (objs.length) {\n    tween.push(new Tween(objs, vars));\n  }\n\n  return flatArray(tween);\n};\n\nTweenOne.kill = function (targets) {\n  if (typeof targets === 'undefined') {\n    globalTimeline.killAll(true);\n  } else {\n    globalTimeline.kill(dataToArray(targets));\n  }\n};\n\nTweenOne.plugins = Plugins;\nexport default TweenOne;\nexport { Tween, globalTimeline };","map":{"version":3,"sources":["/root/GraduateProject/node_modules/tween-one/es/TweenOne.js"],"names":["_typeof","_regeneratorRuntime","_asyncToGenerator","_classCallCheck","_createClass","Plugins","StylePlugin","ArrayPlugin","GradientsPlugin","Ticker","Timeline","Animate","getInitProps","dataToArray","initAnimProps","flatArray","ticker","push","tweenId","globalTimeline","Tween","targets","_props","_this","props","timeline","animate","$reverse","vars","initTime","attr","init","_ref","mark","_callee","wrap","_callee$","_context","prev","next","tagName","animation","map","item","c","style","k","Object","keys","length","duration","Math","round","delay","appearTo","repeatDelay","id","concat","startTime","onChangeChild","onChange","onChangeTimeline","root","parent","stop","_x","apply","arguments","renderToDom","i","key","value","target","setAttribute","ck","$key","path","_ck","va","text","e","mode","render","silence","goto","moment","paused","forEach","_tweenOneVars","kill","index","time","get","pausedState","set","v","reverse","regionStartTime","setTotalTime","regionEndTime","totalTime","TweenOne","console","error","state","wake","t","doms","filter","objs","tween","killAll","plugins"],"mappings":"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","sourcesContent":["import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Plugins from './plugins';\nimport StylePlugin from './plugins/StylePlugin';\nimport ArrayPlugin from './plugins/ArrayPlugin';\nimport GradientsPlugin from './plugins/GradientsPlugin';\nimport Ticker from './animate/ticker';\nimport Timeline from './animate/timeline';\nimport Animate from './animate/animate';\nimport { getInitProps, dataToArray, initAnimProps, flatArray } from './utils';\nimport ticker from './animate/ticker';\nPlugins.push(ArrayPlugin);\nPlugins.push(GradientsPlugin);\nPlugins.push(StylePlugin);\nvar tweenId = 0;\nvar globalTimeline = new Timeline();\n\nvar Tween = /*#__PURE__*/function () {\n  function Tween(targets, _props) {\n    var _this = this;\n\n    _classCallCheck(this, Tween);\n\n    this.targets = void 0;\n    this.props = void 0;\n    this.timeline = void 0;\n    this.animate = void 0;\n    this.$reverse = false;\n    this.vars = [];\n    this.initTime = void 0;\n    this.attr = void 0;\n\n    this.init = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(vars) {\n        var props;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                props = getInitProps(vars);\n\n                if (_this.targets[0].tagName && !_this.attr) {\n                  props.animation = dataToArray(props.animation).map(function (item) {\n                    var c = {\n                      style: {}\n                    };\n\n                    for (var k in item) {\n                      //Object.keys(item).forEach(k => {\n                      if (k in Plugins || k in initAnimProps) {\n                        c[k] = item[k];\n                      } else {\n                        c.style[k] = item[k];\n                      } //});\n\n                    }\n\n                    if (!Object.keys(c.style).length) {\n                      delete c.style;\n                    } // 时间去掉小数点;\n\n\n                    if (item.duration) {\n                      item.duration = Math.round(item.duration);\n                    }\n\n                    if (item.delay) {\n                      item.delay = Math.round(item.delay);\n                    }\n\n                    if (item.appearTo) {\n                      item.appearTo = Math.round(item.appearTo);\n                    }\n\n                    if (item.repeatDelay) {\n                      item.repeatDelay = Math.round(item.repeatDelay);\n                    }\n\n                    return c;\n                  });\n                }\n\n                _this.animate = new Animate(props);\n                _this.animate.id = \"TweenOne_\".concat(tweenId);\n                tweenId++;\n                _this.animate.startTime = _this.initTime;\n                _this.animate.onChangeChild = _this.onChange;\n                _this.animate.onChangeTimeline = _this.onChangeTimeline;\n                _this.animate.root = _this;\n                _this.animate.parent = _this.timeline;\n\n                _this.animate.init();\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.renderToDom = function () {\n      // vars.forEach((item, i) => {\n      for (var i = 0; i < _this.vars.length; i++) {\n        var item = _this.vars[i]; // Object.keys(item).forEach((key: string) => {\n\n        for (var key in item) {\n          var value = item[key];\n          var target = _this.targets[i];\n\n          if (!target) {\n            continue;\n          }\n\n          if (_this.props.attr && target.tagName && target.setAttribute) {\n            if (key === 'style') {\n              // Object.keys(value).forEach(key => {\n              for (var ck in value) {\n                target.style[ck] = value[key];\n              } // });\n\n            }\n\n            target.setAttribute(key, value);\n          } else if (key in Plugins && target.tagName) {\n            var $key = Plugins[key].key;\n\n            if (typeof target[$key] === 'function') {\n              target[$key](value.attr, value.path);\n            } else if ($key && _typeof(value) === 'object') {\n              //Object.keys(value).forEach(ck => {\n              for (var _ck in value) {\n                var va = value[_ck];\n                target[$key][_ck] = va.text || va;\n              } //});\n\n            } else if ($key) {\n              target[$key] = value;\n            }\n          } else {\n            target[key] = value;\n          } // });\n\n        }\n      } //});\n\n    };\n\n    this.onChange = function (e) {\n      if (e.mode === 'onComplete' && e.render) {\n        _this.renderToDom();\n      }\n\n      if (e.mode && _this.props.onChange && !e.silence) {\n        e.targets = flatArray(e.targets);\n        e.vars = flatArray(e.vars);\n\n        _this.props.onChange(e);\n      }\n    };\n\n    this.onChangeTimeline = function (e) {\n      _this.renderToDom();\n\n      if (e.mode && _this.props.onChangeTimeline) {\n        e.targets = flatArray(e.targets);\n        e.vars = flatArray(_this.vars);\n\n        _this.props.onChangeTimeline(e);\n      }\n    };\n\n    this.goto = function (moment, paused) {\n      _this.targets.forEach(function (item) {\n        if (!item) {\n          return;\n        }\n\n        Object.keys(item._tweenOneVars || {}).forEach(function (key) {\n          delete item._tweenOneVars[key];\n        });\n      });\n\n      _this.animate.goto(moment, paused);\n    };\n\n    this.kill = function (index) {\n      _this.animate.kill(index);\n    };\n\n    this.targets = targets;\n    this.props = _props;\n    this.timeline = globalTimeline;\n    this.initTime = Ticker.time;\n    this.attr = _props.attr;\n    targets.forEach(function (item) {\n      _this.vars.push(item._tweenOneVars);\n    });\n    this.init(_props);\n  }\n\n  _createClass(Tween, [{\n    key: \"paused\",\n    get: function get() {\n      return this.animate.pausedState;\n    },\n    set: function set(v) {\n      this.animate.paused(v);\n    }\n  }, {\n    key: \"reverse\",\n    get: function get() {\n      return this.$reverse;\n    },\n    set: function set(v) {\n      this.$reverse = v;\n      this.animate.reverse(v);\n    }\n  }, {\n    key: \"regionStartTime\",\n    get: function get() {\n      return this.animate.regionStartTime;\n    },\n    set: function set(v) {\n      this.animate.regionStartTime = v;\n      this.animate.setTotalTime();\n    }\n  }, {\n    key: \"regionEndTime\",\n    get: function get() {\n      return this.animate.regionEndTime || this.animate.totalTime;\n    },\n    set: function set(v) {\n      this.animate.regionEndTime = v;\n      this.animate.setTotalTime();\n    }\n  }]);\n\n  return Tween;\n}();\n\nvar TweenOne = function TweenOne(targets, vars) {\n  if (!targets) {\n    return console.error(\"Error: targets is undefined.\");\n  }\n\n  if (ticker.state !== 'wake') {\n    // 先将 ticker 唤醒，避免同时添加时 initTime 出错；\n    ticker.wake();\n  }\n\n  var t = dataToArray(targets).map(function (item) {\n    item._tweenOneVars = item._tweenOneVars || {};\n    return item;\n  }); // 分解 targets 里的元素类型\n\n  var doms = t.filter(function (c) {\n    return c.tagName;\n  });\n  var objs = t.filter(function (c) {\n    return !c.tagName;\n  });\n  var tween = [];\n\n  if (doms.length) {\n    tween.push(new Tween(doms, vars));\n  }\n\n  if (objs.length) {\n    tween.push(new Tween(objs, vars));\n  }\n\n  return flatArray(tween);\n};\n\nTweenOne.kill = function (targets) {\n  if (typeof targets === 'undefined') {\n    globalTimeline.killAll(true);\n  } else {\n    globalTimeline.kill(dataToArray(targets));\n  }\n};\n\nTweenOne.plugins = Plugins;\nexport default TweenOne;\nexport { Tween, globalTimeline };"]},"metadata":{},"sourceType":"module"}