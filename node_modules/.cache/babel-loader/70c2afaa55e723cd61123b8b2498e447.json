{"ast":null,"code":"import _classCallCheck from\"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import{createBrowserHistory,createMemoryHistory,createHashHistory}from'history';import{toValidDuration}from'../config/ServerConfig';var webRoot=window.WEB_ROOT?window.WEB_ROOT:undefined;var baseName=webRoot&&webRoot!=='/'?webRoot+'/console':'/console';var historyMode=window.HISTORY_MODE?window.HISTORY_MODE:'browser';var history=process.env.TEST_RUNNER?createMemoryHistory():historyMode==='hash'?createHashHistory():createBrowserHistory({basename:baseName});export default history;export var URLParam;(function(URLParam){URLParam[\"AGGREGATOR\"]=\"aggregator\";URLParam[\"BY_LABELS\"]=\"bylbl\";URLParam[\"DIRECTION\"]=\"direction\";URLParam[\"DISPLAY_MODE\"]=\"displayMode\";URLParam[\"DURATION\"]=\"duration\";URLParam[\"FOCUS_SELECTOR\"]=\"focusSelector\";URLParam[\"FROM\"]=\"from\";URLParam[\"GRAPH_ANIMATION\"]=\"animation\";URLParam[\"GRAPH_BADGE_SECURITY\"]=\"badgeSecurity\";URLParam[\"GRAPH_BADGE_SIDECAR\"]=\"badgeSidecar\";URLParam[\"GRAPH_BADGE_VS\"]=\"badgeVS\";URLParam[\"GRAPH_BOX_CLUSTER\"]=\"boxCluster\";URLParam[\"GRAPH_BOX_NAMESPACE\"]=\"boxNamespace\";URLParam[\"GRAPH_COMPRESS_ON_HIDE\"]=\"graphCompressOnHide\";URLParam[\"GRAPH_EDGE_LABEL\"]=\"edges\";URLParam[\"GRAPH_FIND\"]=\"graphFind\";URLParam[\"GRAPH_HIDE\"]=\"graphHide\";URLParam[\"GRAPH_IDLE_EDGES\"]=\"idleEdges\";URLParam[\"GRAPH_IDLE_NODES\"]=\"idleNodes\";URLParam[\"GRAPH_LAYOUT\"]=\"layout\";URLParam[\"GRAPH_OPERATION_NODES\"]=\"operationNodes\";URLParam[\"GRAPH_REPLAY_ACTIVE\"]=\"replayActive\";URLParam[\"GRAPH_REPLAY_INTERVAL\"]=\"replayInterval\";URLParam[\"GRAPH_REPLAY_START\"]=\"replayStart\";URLParam[\"GRAPH_SERVICE_NODES\"]=\"injectServiceNodes\";URLParam[\"GRAPH_TRAFFIC\"]=\"traffic\";URLParam[\"GRAPH_TYPE\"]=\"graphType\";URLParam[\"JAEGER_ERRORS_ONLY\"]=\"errs\";URLParam[\"JAEGER_LIMIT_TRACES\"]=\"limit\";URLParam[\"JAEGER_PERCENTILE\"]=\"percentile\";URLParam[\"JAEGER_SHOW_SPANS_AVG\"]=\"showSpansAvg\";URLParam[\"JAEGER_TRACE_ID\"]=\"traceId\";URLParam[\"JAEGER_SPAN_ID\"]=\"spanId\";URLParam[\"NAMESPACES\"]=\"namespaces\";URLParam[\"OVERVIEW_TYPE\"]=\"otype\";URLParam[\"QUANTILES\"]=\"quantiles\";URLParam[\"RANGE_DURATION\"]=\"rangeDuration\";URLParam[\"REFRESH_INTERVAL\"]=\"refresh\";URLParam[\"REPORTER\"]=\"reporter\";URLParam[\"SHOW_AVERAGE\"]=\"avg\";URLParam[\"SHOW_SPANS\"]=\"spans\";URLParam[\"SORT\"]=\"sort\";URLParam[\"TO\"]=\"to\";URLParam[\"EXPERIMENTAL_FLAGS\"]=\"xflags\";})(URLParam||(URLParam={}));export var ParamAction;(function(ParamAction){ParamAction[ParamAction[\"APPEND\"]=0]=\"APPEND\";ParamAction[ParamAction[\"SET\"]=1]=\"SET\";})(ParamAction||(ParamAction={}));export var HistoryManager=function HistoryManager(){_classCallCheck(this,HistoryManager);};HistoryManager.setParam=function(name,value){var urlParams=new URLSearchParams(history.location.search);urlParams.set(name,value);history.replace(history.location.pathname+'?'+urlParams.toString());};HistoryManager.getParam=function(name,urlParams){if(!urlParams){urlParams=new URLSearchParams(history.location.search);}var p=urlParams.get(name);return p!==null?p:undefined;};HistoryManager.getNumericParam=function(name,urlParams){var p=HistoryManager.getParam(name,urlParams);return p!==undefined?Number(p):undefined;};HistoryManager.getBooleanParam=function(name,urlParams){var p=HistoryManager.getParam(name,urlParams);return p!==undefined?p==='true':undefined;};HistoryManager.deleteParam=function(name,historyReplace){var urlParams=new URLSearchParams(history.location.search);urlParams.delete(name);if(historyReplace){history.replace(history.location.pathname+'?'+urlParams.toString());}else{history.push(history.location.pathname+'?'+urlParams.toString());}};HistoryManager.setParams=function(params,paramAction,historyReplace){var urlParams=new URLSearchParams(history.location.search);if(params.length>0&&paramAction===ParamAction.APPEND){params.forEach(function(param){return urlParams.delete(param.name);});}params.forEach(function(param){if(param.value===''){urlParams.delete(param.name);}else if(paramAction===ParamAction.APPEND){urlParams.append(param.name,param.value);}else{urlParams.set(param.name,param.value);}});if(historyReplace){history.replace(history.location.pathname+'?'+urlParams.toString());}else{history.push(history.location.pathname+'?'+urlParams.toString());}};HistoryManager.getDuration=function(urlParams){var duration=HistoryManager.getNumericParam(URLParam.DURATION,urlParams);if(duration){return toValidDuration(Number(duration));}return undefined;};HistoryManager.getRangeDuration=function(urlParams){var rangeDuration=HistoryManager.getNumericParam(URLParam.RANGE_DURATION,urlParams);if(rangeDuration){return toValidDuration(Number(rangeDuration));}return undefined;};HistoryManager.getTimeBounds=function(urlParams){var from=HistoryManager.getNumericParam(URLParam.FROM,urlParams);if(from){var to=HistoryManager.getNumericParam(URLParam.TO,urlParams);// \"to\" can be undefined (stands for \"now\")\nreturn{from:from,to:to};}return undefined;};","map":null,"metadata":{},"sourceType":"module"}