{"ast":null,"code":"import _classCallCheck from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/root/kiali-ui/src/components/VirtualList/VirtualList.tsx\";\nimport * as React from 'react';\nimport { Table, TableHeader, TableGridBreakpoint } from '@patternfly/react-table';\nimport history, { HistoryManager, URLParam } from '../../app/History';\nimport { config } from './Config';\nimport VirtualItem from './VirtualItem';\nimport { EmptyState, EmptyStateBody, EmptyStateVariant, Title } from '@patternfly/react-core';\nimport { activeNamespacesSelector } from '../../store/Selectors';\nimport { connect } from 'react-redux';\nimport * as FilterHelper from '../FilterList/FilterHelper';\nimport * as Sorts from '../../pages/Overview/Sorts';\n// get the type of list user request\nvar listRegex = /\\/([a-z0-9-]+)/;\n\nvar VirtualListC = /*#__PURE__*/function (_React$Component) {\n  _inherits(VirtualListC, _React$Component);\n\n  var _super = _createSuper(VirtualListC);\n\n  function VirtualListC(props) {\n    var _this;\n\n    _classCallCheck(this, VirtualListC);\n\n    _this = _super.call(this, props);\n    _this.statefulFilters = React.createRef();\n\n    _this.onSort = function (_event, index, direction) {\n      _this.setState({\n        sortBy: {\n          index: index,\n          direction: direction\n        }\n      });\n\n      if (direction) {\n        HistoryManager.setParam(URLParam.DIRECTION, direction);\n      }\n\n      HistoryManager.setParam(URLParam.SORT, String(_this.state.conf.columns[index].param));\n      _this.props.sort && _this.props.sort(FilterHelper.currentSortField(Sorts.sortFields), direction === 'asc');\n    };\n\n    var match = history.location.pathname.match(listRegex) || [];\n    var type = match[1] || '';\n    var conf = config[type];\n    var columns = conf.columns && config.headerTable ? conf.columns.map(function (info) {\n      var config = {\n        title: info.column\n      };\n\n      if (info.transforms) {\n        config['transforms'] = info.transforms;\n      }\n\n      if (info.cellTransforms) {\n        config['cellTransforms'] = info.cellTransforms;\n      }\n\n      return config;\n    }) : [];\n\n    if (_this.props.actions) {\n      columns.push({\n        title: ''\n      });\n    }\n\n    var _index = -1;\n\n    var sortParam = HistoryManager.getParam(URLParam.SORT);\n\n    if (sortParam) {\n      _index = conf.columns.findIndex(function (column) {\n        return column.param === sortParam;\n      });\n    }\n\n    _this.state = {\n      type: type,\n      sortBy: {\n        index: _index,\n        direction: HistoryManager.getParam(URLParam.DIRECTION)\n      },\n      columns: columns,\n      conf: conf\n    };\n    return _this;\n  }\n\n  _createClass(VirtualListC, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var rows = this.props.rows;\n      var _this$state = this.state,\n          sortBy = _this$state.sortBy,\n          columns = _this$state.columns,\n          conf = _this$state.conf;\n      var tableProps = {\n        cells: columns,\n        rows: [],\n        gridBreakPoint: TableGridBreakpoint.none,\n        role: 'presentation',\n        caption: conf.caption ? conf.caption : undefined\n      };\n      var typeDisplay = this.state.type === 'istio' ? 'Istio config' : this.state.type;\n      var childrenWithProps = React.Children.map(this.props.children, function (child) {\n        // Checking isValidElement is the safe way and avoids a TS error too.\n        if (React.isValidElement(child)) {\n          return React.cloneElement(child, {\n            ref: _this2.statefulFilters\n          });\n        }\n\n        return child;\n      });\n      var rowItems = rows.map(function (r, i) {\n        return /*#__PURE__*/React.createElement(VirtualItem, {\n          key: 'vItem' + i,\n          item: r,\n          index: i,\n          config: conf,\n          statefulFilterProps: _this2.props.statefulProps ? _this2.props.statefulProps : _this2.statefulFilters,\n          action: _this2.props.actions && _this2.props.actions[i] ? _this2.props.actions[i] : undefined,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 9\n          }\n        });\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          padding: '20px',\n          marginBottom: '20px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 7\n        }\n      }, childrenWithProps, /*#__PURE__*/React.createElement(Table, Object.assign({}, tableProps, {\n        sortBy: sortBy,\n        onSort: this.onSort,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(TableHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }\n      }, this.props.rows.length > 0 ? rowItems : /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: tableProps.cells.length,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }\n      }, this.props.activeNamespaces.length > 0 ? /*#__PURE__*/React.createElement(EmptyState, {\n        variant: EmptyStateVariant.full,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Title, {\n        headingLevel: \"h5\",\n        size: \"lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 23\n        }\n      }, \"\\u672A\\u53D1\\u73B0\\u76F8\\u5173 \", typeDisplay), /*#__PURE__*/React.createElement(EmptyStateBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 23\n        }\n      }, \"No \", typeDisplay, \" in namespace\", this.props.activeNamespaces.length === 1 ? \" \".concat(this.props.activeNamespaces[0].name) : \"s: \".concat(this.props.activeNamespaces.map(function (ns) {\n        return ns.name;\n      }).join(', ')))) : /*#__PURE__*/React.createElement(EmptyState, {\n        variant: EmptyStateVariant.full,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Title, {\n        headingLevel: \"h5\",\n        size: \"lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 23\n        }\n      }, \"\\u672A\\u9009\\u62E9\\u547D\\u540D\\u7A7A\\u95F4\"), /*#__PURE__*/React.createElement(EmptyStateBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 23\n        }\n      }, \"\\u8BF7\\u9009\\u62E9\\u670D\\u52A1\\u7F51\\u683C\\u914D\\u7F6E\\u6240\\u5728\\u7684\\u547D\\u540D\\u7A7A\\u95F4\")))))));\n    }\n  }]);\n\n  return VirtualListC;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    activeNamespaces: activeNamespacesSelector(state)\n  };\n};\n\nvar VirtualList = connect(mapStateToProps)(VirtualListC);\nexport default VirtualList;","map":{"version":3,"sources":["/root/kiali-ui/src/components/VirtualList/VirtualList.tsx"],"names":["React","Table","TableHeader","TableGridBreakpoint","history","HistoryManager","URLParam","config","VirtualItem","EmptyState","EmptyStateBody","EmptyStateVariant","Title","activeNamespacesSelector","connect","FilterHelper","Sorts","listRegex","VirtualListC","props","statefulFilters","createRef","onSort","_event","index","direction","setState","sortBy","setParam","DIRECTION","SORT","String","state","conf","columns","param","sort","currentSortField","sortFields","match","location","pathname","type","headerTable","map","info","title","column","transforms","cellTransforms","actions","push","sortParam","getParam","findIndex","rows","tableProps","cells","gridBreakPoint","none","role","caption","undefined","typeDisplay","childrenWithProps","Children","children","child","isValidElement","cloneElement","ref","rowItems","r","i","statefulProps","padding","marginBottom","length","activeNamespaces","full","name","ns","join","Component","mapStateToProps","VirtualList"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Table, TableHeader, TableGridBreakpoint } from '@patternfly/react-table';\nimport history, { HistoryManager, URLParam } from '../../app/History';\nimport { config, RenderResource, Resource } from './Config';\nimport VirtualItem from './VirtualItem';\nimport { EmptyState, EmptyStateBody, EmptyStateVariant, Title } from '@patternfly/react-core';\nimport { KialiAppState } from '../../store/Store';\nimport { activeNamespacesSelector } from '../../store/Selectors';\nimport { connect } from 'react-redux';\nimport Namespace from '../../types/Namespace';\nimport { SortField } from '../../types/SortFilters';\nimport NamespaceInfo from '../../pages/Overview/NamespaceInfo';\nimport * as FilterHelper from '../FilterList/FilterHelper';\nimport * as Sorts from '../../pages/Overview/Sorts';\nimport { StatefulFilters } from '../Filters/StatefulFilters';\n\n// ******************************\n// VirtualList and its associated classes are intended to be used for main list pages: Applications,\n// Workloads, Services and Istio Config. They share common style and filter integration. They have\n// have limitations in scenarios where different personalization is needed (columns style, or layout).\n// For a secondary list, rendered inside a detail page, it is recommended the imple be based on a\n// Table component, such as in WorkloadServices, WorkloadPods, ServiceInfoWorkload, IstioConfigSubList,\n// or TrafficListComponent.\n// ******************************\n\ntype Direction = 'asc' | 'desc' | undefined;\n\ntype VirtualListProps<R> = {\n  activeNamespaces: Namespace[];\n  children?: React.ReactNode;\n  rows: R[];\n  sort?: (sortField: SortField<NamespaceInfo>, isAscending: boolean) => void;\n  statefulProps?: React.RefObject<StatefulFilters>;\n  actions?: JSX.Element[];\n};\n\ntype VirtualListState = {\n  type: string;\n  sortBy: {\n    index: number;\n    direction: Direction;\n  };\n  columns: any[];\n  conf: Resource;\n};\n\n// get the type of list user request\nconst listRegex = /\\/([a-z0-9-]+)/;\n\nclass VirtualListC<R extends RenderResource> extends React.Component<VirtualListProps<R>, VirtualListState> {\n  private statefulFilters: React.RefObject<StatefulFilters> = React.createRef();\n\n  constructor(props: VirtualListProps<R>) {\n    super(props);\n    const match = history.location.pathname.match(listRegex) || [];\n    const type = match[1] || '';\n    const conf = config[type] as Resource;\n    const columns =\n      conf.columns && config.headerTable\n        ? conf.columns.map(info => {\n            let config = { title: info.column };\n            if (info.transforms) {\n              config['transforms'] = info.transforms;\n            }\n            if (info.cellTransforms) {\n              config['cellTransforms'] = info.cellTransforms;\n            }\n            return config;\n          })\n        : [];\n    if (this.props.actions) {\n      columns.push({\n        title: ''\n      });\n    }\n    let index = -1;\n    const sortParam = HistoryManager.getParam(URLParam.SORT);\n    if (sortParam) {\n      index = conf.columns.findIndex(column => column.param === sortParam);\n    }\n    this.state = {\n      type,\n      sortBy: {\n        index,\n        direction: HistoryManager.getParam(URLParam.DIRECTION) as Direction\n      },\n      columns,\n      conf\n    };\n  }\n\n  onSort = (_event, index, direction) => {\n    this.setState({\n      sortBy: {\n        index,\n        direction\n      }\n    });\n    if (direction) {\n      HistoryManager.setParam(URLParam.DIRECTION, direction);\n    }\n    HistoryManager.setParam(URLParam.SORT, String(this.state.conf.columns[index].param));\n    this.props.sort && this.props.sort(FilterHelper.currentSortField(Sorts.sortFields), direction === 'asc');\n  };\n\n  render() {\n    const { rows } = this.props;\n    const { sortBy, columns, conf } = this.state;\n    const tableProps = {\n      cells: columns,\n      rows: [],\n      gridBreakPoint: TableGridBreakpoint.none,\n      role: 'presentation',\n      caption: conf.caption ? conf.caption : undefined\n    };\n    const typeDisplay = this.state.type === 'istio' ? 'Istio config' : this.state.type;\n\n    const childrenWithProps = React.Children.map(this.props.children, child => {\n      // Checking isValidElement is the safe way and avoids a TS error too.\n      if (React.isValidElement(child)) {\n        return React.cloneElement(child, { ref: this.statefulFilters });\n      }\n\n      return child;\n    });\n\n    const rowItems: any[] = rows.map((r, i) => {\n      return (\n        <VirtualItem\n          key={'vItem' + i}\n          item={r}\n          index={i}\n          config={conf}\n          statefulFilterProps={this.props.statefulProps ? this.props.statefulProps : this.statefulFilters}\n          action={this.props.actions && this.props.actions[i] ? this.props.actions[i] : undefined}\n        />\n      );\n    });\n\n    return (\n      <div\n        style={{\n          padding: '20px',\n          marginBottom: '20px'\n        }}\n      >\n        {childrenWithProps}\n        <Table {...tableProps} sortBy={sortBy} onSort={this.onSort}>\n          <TableHeader />\n          <tbody>\n            {this.props.rows.length > 0 ? (\n              rowItems\n            ) : (\n              <tr>\n                <td colSpan={tableProps.cells.length}>\n                  {this.props.activeNamespaces.length > 0 ? (\n                    <EmptyState variant={EmptyStateVariant.full}>\n                      <Title headingLevel=\"h5\" size=\"lg\">\n                        未发现相关 {typeDisplay} \n                      </Title>\n                      <EmptyStateBody>\n                        No {typeDisplay} in namespace\n                        {this.props.activeNamespaces.length === 1\n                          ? ` ${this.props.activeNamespaces[0].name}`\n                          : `s: ${this.props.activeNamespaces.map(ns => ns.name).join(', ')}`}\n                      </EmptyStateBody>\n                    </EmptyState>\n                  ) : (\n                    <EmptyState variant={EmptyStateVariant.full}>\n                      <Title headingLevel=\"h5\" size=\"lg\">\n                        未选择命名空间\n                      </Title>\n                      <EmptyStateBody>\n                        请选择服务网格配置所在的命名空间\n                      </EmptyStateBody>\n                    </EmptyState>\n                  )}\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </Table>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: KialiAppState) => ({\n  activeNamespaces: activeNamespacesSelector(state)\n});\n\nconst VirtualList = connect(mapStateToProps)(VirtualListC);\nexport default VirtualList;\n"]},"metadata":{},"sourceType":"module"}