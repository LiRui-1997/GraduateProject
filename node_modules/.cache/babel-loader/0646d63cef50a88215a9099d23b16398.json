{"ast":null,"code":"import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport { interpolate } from 'flubber';\n\nvar SvgMorph = /*#__PURE__*/_createClass(function SvgMorph(value, _key) {\n  var _this = this;\n\n  _classCallCheck(this, SvgMorph);\n\n  this.value = void 0;\n  this.key = void 0;\n  this.startAt = void 0;\n  this.start = '';\n  this.vars = {};\n  this.target = void 0;\n  this.attr = void 0;\n  this.maxSegmentLength = void 0;\n  this.toPath = void 0;\n  this.interpolator = void 0;\n  this.pointsArray = void 0;\n\n  this.getPointVars = function (d) {\n    if (Array.isArray(d)) {\n      return d;\n    }\n\n    return d.replace(/\\,\\s+/g, ',').split(/\\s+/).map(function (item) {\n      return item.split(',').map(function (_item) {\n        return parseFloat(_item.replace(/[a-z]/gi, ''));\n      });\n    });\n  };\n\n  this.polygonPoints = function (start, end) {\n    var startArray = _this.getPointVars(start);\n\n    var endArray = _this.getPointVars(end);\n\n    if (startArray.length !== endArray.length) {\n      var t = startArray.length > endArray.length;\n      var long = t ? startArray : endArray;\n      var short = long === startArray ? endArray : startArray;\n\n      for (var i = short.length; i < long.length; i++) {\n        short[i] = short[short.length - 1];\n      }\n\n      return t ? [long, short] : [short, long];\n    }\n\n    return [startArray, endArray];\n  };\n\n  this.getAnimStart = function () {\n    var target = _this.target,\n        _this$startAt = _this.startAt,\n        startAt = _this$startAt === void 0 ? {} : _this$startAt,\n        key = _this.key;\n    var tagName = target.tagName;\n\n    if (startAt[key]) {\n      if (_typeof(startAt[key]) === 'object') {\n        _this.attr = startAt[key].attr || _this.attr;\n        _this.start = startAt[key].path;\n        _this.maxSegmentLength = startAt[key].maxSegmentLength;\n      } else if (typeof startAt[key] === 'string') {\n        _this.start = startAt[key];\n      }\n    } // svg 标签强制 attr 为标签的 attr;\n\n\n    _this.attr = tagName === 'polygon' ? 'points' : _this.attr;\n    _this.attr = tagName === 'path' ? 'd' : _this.attr;\n    _this.start = _this.start || (target.getAttribute ? target.getAttribute(_this.attr) : target[_this.attr]);\n    _this.start = _this.start || 'M0,0Z';\n\n    if (tagName === 'polygon' || _this.attr === 'points') {\n      _this.pointsArray = _this.polygonPoints(_this.start, _this.toPath);\n    } else {\n      _this.interpolator = interpolate(_this.start, _this.toPath, {\n        maxSegmentLength: _this.maxSegmentLength\n      });\n    }\n\n    return _this.start;\n  };\n\n  this.setArrayRatio = function (ratio, start, item, i) {\n    if (typeof item === 'string') {\n      return item;\n    }\n\n    var startData = start[i];\n    return (item - startData) * ratio + startData;\n  };\n\n  this.render = function (r) {\n    var target = _this.target;\n    var tagName = target.tagName;\n    var s;\n\n    if (tagName === 'polygon' || _this.attr === 'points') {\n      var start = _this.pointsArray[0];\n      s = _this.pointsArray[1].map(function (item, i) {\n        return item.map(function (c, ci) {\n          return _this.setArrayRatio(r, start[i], c, ci);\n        }).join(', ');\n      }).join(' ');\n    } else {\n      s = _this.interpolator(r);\n    }\n\n    return {\n      path: s,\n      attr: _this.attr\n    };\n  };\n\n  this.value = value;\n  this.key = _key;\n  this.attr = value.attr || '';\n  this.toPath = value.path;\n  this.maxSegmentLength = typeof value.maxSegmentLength === 'undefined' ? 0.5 : value.maxSegmentLength;\n});\n\nSvgMorph.key = 'setAttribute';\nSvgMorph.className = 'SVGMorph';\nexport { SvgMorph as default };","map":{"version":3,"sources":["/root/GraduateProject/node_modules/tween-one/es/plugins/SvgMorphPlugin.js"],"names":["_typeof","_createClass","_classCallCheck","interpolate","SvgMorph","value","_key","_this","key","startAt","start","vars","target","attr","maxSegmentLength","toPath","interpolator","pointsArray","getPointVars","d","Array","isArray","replace","split","map","item","_item","parseFloat","polygonPoints","end","startArray","endArray","length","t","long","short","i","getAnimStart","_this$startAt","tagName","path","getAttribute","setArrayRatio","ratio","startData","render","r","s","c","ci","join","className","default"],"mappings":"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","sourcesContent":["import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport { interpolate } from 'flubber';\n\nvar SvgMorph = /*#__PURE__*/_createClass(function SvgMorph(value, _key) {\n  var _this = this;\n\n  _classCallCheck(this, SvgMorph);\n\n  this.value = void 0;\n  this.key = void 0;\n  this.startAt = void 0;\n  this.start = '';\n  this.vars = {};\n  this.target = void 0;\n  this.attr = void 0;\n  this.maxSegmentLength = void 0;\n  this.toPath = void 0;\n  this.interpolator = void 0;\n  this.pointsArray = void 0;\n\n  this.getPointVars = function (d) {\n    if (Array.isArray(d)) {\n      return d;\n    }\n\n    return d.replace(/\\,\\s+/g, ',').split(/\\s+/).map(function (item) {\n      return item.split(',').map(function (_item) {\n        return parseFloat(_item.replace(/[a-z]/gi, ''));\n      });\n    });\n  };\n\n  this.polygonPoints = function (start, end) {\n    var startArray = _this.getPointVars(start);\n\n    var endArray = _this.getPointVars(end);\n\n    if (startArray.length !== endArray.length) {\n      var t = startArray.length > endArray.length;\n      var long = t ? startArray : endArray;\n      var short = long === startArray ? endArray : startArray;\n\n      for (var i = short.length; i < long.length; i++) {\n        short[i] = short[short.length - 1];\n      }\n\n      return t ? [long, short] : [short, long];\n    }\n\n    return [startArray, endArray];\n  };\n\n  this.getAnimStart = function () {\n    var target = _this.target,\n        _this$startAt = _this.startAt,\n        startAt = _this$startAt === void 0 ? {} : _this$startAt,\n        key = _this.key;\n    var tagName = target.tagName;\n\n    if (startAt[key]) {\n      if (_typeof(startAt[key]) === 'object') {\n        _this.attr = startAt[key].attr || _this.attr;\n        _this.start = startAt[key].path;\n        _this.maxSegmentLength = startAt[key].maxSegmentLength;\n      } else if (typeof startAt[key] === 'string') {\n        _this.start = startAt[key];\n      }\n    } // svg 标签强制 attr 为标签的 attr;\n\n\n    _this.attr = tagName === 'polygon' ? 'points' : _this.attr;\n    _this.attr = tagName === 'path' ? 'd' : _this.attr;\n    _this.start = _this.start || (target.getAttribute ? target.getAttribute(_this.attr) : target[_this.attr]);\n    _this.start = _this.start || 'M0,0Z';\n\n    if (tagName === 'polygon' || _this.attr === 'points') {\n      _this.pointsArray = _this.polygonPoints(_this.start, _this.toPath);\n    } else {\n      _this.interpolator = interpolate(_this.start, _this.toPath, {\n        maxSegmentLength: _this.maxSegmentLength\n      });\n    }\n\n    return _this.start;\n  };\n\n  this.setArrayRatio = function (ratio, start, item, i) {\n    if (typeof item === 'string') {\n      return item;\n    }\n\n    var startData = start[i];\n    return (item - startData) * ratio + startData;\n  };\n\n  this.render = function (r) {\n    var target = _this.target;\n    var tagName = target.tagName;\n    var s;\n\n    if (tagName === 'polygon' || _this.attr === 'points') {\n      var start = _this.pointsArray[0];\n      s = _this.pointsArray[1].map(function (item, i) {\n        return item.map(function (c, ci) {\n          return _this.setArrayRatio(r, start[i], c, ci);\n        }).join(', ');\n      }).join(' ');\n    } else {\n      s = _this.interpolator(r);\n    }\n\n    return {\n      path: s,\n      attr: _this.attr\n    };\n  };\n\n  this.value = value;\n  this.key = _key;\n  this.attr = value.attr || '';\n  this.toPath = value.path;\n  this.maxSegmentLength = typeof value.maxSegmentLength === 'undefined' ? 0.5 : value.maxSegmentLength;\n});\n\nSvgMorph.key = 'setAttribute';\nSvgMorph.className = 'SVGMorph';\nexport { SvgMorph as default };"]},"metadata":{},"sourceType":"module"}