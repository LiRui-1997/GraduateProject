{"ast":null,"code":"import _slicedToArray from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/root/kiali-ui/src/components/VirtualList/Renderers.tsx\";\n\nimport * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Badge, Tooltip, TooltipPosition } from '@patternfly/react-core';\nimport * as FilterHelper from '../FilterList/FilterHelper';\nimport { appLabelFilter, versionLabelFilter } from '../../pages/WorkloadList/FiltersAndSorts';\nimport MissingSidecar from '../MissingSidecar/MissingSidecar';\nimport { hasMissingSidecar, IstioTypes } from './Config';\nimport { HealthIndicator } from '../Health/HealthIndicator';\nimport { ValidationObjectSummary } from '../Validations/ValidationObjectSummary';\nimport { ValidationServiceSummary } from '../Validations/ValidationServiceSummary';\nimport { PFColors } from '../Pf/PfColors';\nimport { renderAPILogo } from '../Logo/Logos';\nimport NamespaceMTLSStatusContainer from '../MTls/NamespaceMTLSStatus';\nimport ValidationSummary from '../Validations/ValidationSummary';\nimport OverviewCardContentExpanded from '../../pages/Overview/OverviewCardContentExpanded';\nimport { OverviewToolbar } from '../../pages/Overview/OverviewToolbar';\nimport IstioObjectLink, { GetIstioObjectUrl } from '../Link/IstioObjectLink';\nimport { labelFilter } from 'components/Filters/CommonFilters';\nimport { labelFilter as NsLabelFilter } from '../../pages/Overview/Filters';\nimport ValidationSummaryLink from '../Link/ValidationSummaryLink';\nimport { PFBadge, PFBadges } from 'components/Pf/PfBadges';\nimport MissingLabel from '../MissingLabel/MissingLabel'; // Links\n\nvar getLink = function getLink(item, config, query) {\n  var url = config.name === 'istio' ? getIstioLink(item) : \"/namespaces/\".concat(item.namespace, \"/\").concat(config.name, \"/\").concat(item.name);\n  return query ? url + '?' + query : url;\n};\n\nvar getIstioLink = function getIstioLink(item) {\n  var type = item['type'];\n  return GetIstioObjectUrl(item.name, item.namespace, type);\n}; // Cells\n\n\nexport var actionRenderer = function actionRenderer(key, action) {\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_Action_' + key,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, action);\n};\nexport var details = function details(item) {\n  var hasMissingSC = hasMissingSidecar(item);\n  var isWorkload = ('appLabel' in item);\n  var hasMissingApp = isWorkload && !item['appLabel'];\n  var hasMissingVersion = isWorkload && !item['versionLabel'];\n  var additionalDetails = item.additionalDetailSample;\n  var spacer = hasMissingSC && additionalDetails && additionalDetails.icon;\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_Details_' + item.namespace + '_' + item.name,\n    style: {\n      verticalAlign: 'middle',\n      whiteSpace: 'nowrap'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, hasMissingSC && /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MissingSidecar, {\n    namespace: item.namespace,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  })), isWorkload && (hasMissingApp || hasMissingVersion) && /*#__PURE__*/React.createElement(MissingLabel, {\n    missingApp: hasMissingApp,\n    missingVersion: hasMissingVersion,\n    tooltip: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }), spacer && ' ', additionalDetails && additionalDetails.icon && /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, renderAPILogo(additionalDetails.icon, additionalDetails.title, 0)), item.istioReferences && item.istioReferences.length > 0 && item.istioReferences.map(function (ir) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(PFBadge, {\n      badge: PFBadges[ir.objectType],\n      position: TooltipPosition.top,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(IstioObjectLink, {\n      name: ir.name,\n      namespace: item.namespace || '',\n      type: ir.objectType.toLowerCase(),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, ir.name));\n  })));\n};\nexport var tls = function tls(ns) {\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtualItem_tls_' + ns.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, ns.tlsStatus ? /*#__PURE__*/React.createElement(NamespaceMTLSStatusContainer, {\n    status: ns.tlsStatus.status,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 23\n    }\n  }) : undefined);\n};\nexport var istioConfig = function istioConfig(ns) {\n  var validations = {\n    objectCount: 0,\n    errors: 0,\n    warnings: 0\n  };\n\n  if (!!ns.validations) {\n    validations = ns.validations;\n  }\n\n  var status = /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_IstioConfig_' + ns.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ValidationSummaryLink, {\n    namespace: ns.name,\n    objectCount: validations.objectCount,\n    errors: validations.errors,\n    warnings: validations.warnings,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ValidationSummary, {\n    id: 'ns-val-' + ns.name,\n    errors: validations.errors,\n    warnings: validations.warnings,\n    objectCount: validations.objectCount,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  })));\n  return status;\n};\nexport var status = function status(ns) {\n  if (ns.status) {\n    return /*#__PURE__*/React.createElement(\"td\", {\n      role: \"gridcell\",\n      key: 'VirtuaItem_Status_' + ns.name,\n      className: \"pf-m-center\",\n      style: {\n        verticalAlign: 'middle'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(OverviewCardContentExpanded, {\n      key: ns.name,\n      name: ns.name,\n      duration: FilterHelper.currentDuration(),\n      status: ns.status,\n      type: OverviewToolbar.currentOverviewType(),\n      metrics: ns.metrics,\n      errorMetrics: ns.errorMetrics,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_Status_' + ns.name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 10\n    }\n  });\n};\nexport var nsItem = function nsItem(ns, _config, badge) {\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_NamespaceItem_' + ns.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PFBadge, {\n    badge: badge,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }\n  }), ns.name);\n};\nexport var item = function item(_item, config, badge) {\n  var key = 'link_definition_' + config.name + '_' + _item.namespace + '_' + _item.name;\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_Item_' + _item.namespace + '_' + _item.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PFBadge, {\n    badge: badge,\n    position: TooltipPosition.top,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    key: key,\n    to: getLink(_item, config),\n    className: 'virtualitem_definition_link',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, _item.name));\n};\nexport var namespace = function namespace(item) {\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_Namespace_' + item.namespace + '_' + item.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PFBadge, {\n    badge: PFBadges.Namespace,\n    position: TooltipPosition.top,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }), item.namespace);\n};\n\nvar labelActivate = function labelActivate(filters, key, value, id) {\n  return filters.some(function (filter) {\n    if (filter.id === id) {\n      if (filter.value.includes(':')) {\n        var _filter$value$split = filter.value.split(':'),\n            _filter$value$split2 = _slicedToArray(_filter$value$split, 2),\n            k = _filter$value$split2[0],\n            v = _filter$value$split2[1];\n\n        if (k === key) {\n          return v.split(',').some(function (val) {\n            return value.split(',').some(function (vl) {\n              return vl.trim().startsWith(val.trim());\n            });\n          });\n        }\n\n        return false;\n      }\n\n      return key === filter.value;\n    } else {\n      if (filter.id === appLabelFilter.id) {\n        return filter.value === 'Present' && key === 'app';\n      }\n\n      return filter.value === 'Present' && key === 'version';\n    }\n  });\n};\n\nexport var labels = function labels(item, _, __, ___, statefulFilter) {\n  var path = window.location.pathname;\n  path = path.substr(path.lastIndexOf('/console') + '/console'.length + 1);\n  var labelFilt = path === 'overview' ? NsLabelFilter : labelFilter;\n  var filters = FilterHelper.getFiltersFromURL([labelFilt, appLabelFilter, versionLabelFilter]);\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_Labels_' + ('namespace' in item && \"\".concat(item.namespace, \"_\")) + item.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 5\n    }\n  }, item.labels && Object.entries(item.labels).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    var label = \"\".concat(key, \":\").concat(value);\n    var labelAct = labelActivate(filters.filters, key, value, labelFilt.id);\n    var isExactlyLabelFilter = FilterHelper.getFiltersFromURL([labelFilt]).filters.some(function (f) {\n      return f.value.includes(label);\n    });\n    var badgeComponent = /*#__PURE__*/React.createElement(Badge, {\n      key: \"labelbadge_\".concat(key, \"_\").concat(value, \"_\").concat(item.name),\n      isRead: true,\n      style: {\n        backgroundColor: labelAct ? PFColors.Badge : undefined,\n        cursor: isExactlyLabelFilter || !labelAct ? 'pointer' : 'not-allowed',\n        whiteSpace: 'nowrap'\n      },\n      onClick: function onClick() {\n        return statefulFilter ? labelAct ? isExactlyLabelFilter && statefulFilter.current.removeFilter(labelFilt.id, label) : statefulFilter.current.filterAdded(labelFilt, label) : {};\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 13\n      }\n    }, key, \": \", value);\n    return statefulFilter ? /*#__PURE__*/React.createElement(Tooltip, {\n      key: 'Tooltip_Label_' + key + '_' + value,\n      content: labelAct ? isExactlyLabelFilter ? /*#__PURE__*/React.createElement(React.Fragment, null, \"Remove label from Filters\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"Kiali can't remove the filter if is an expression\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"Add label to Filters\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 13\n      }\n    }, badgeComponent) : badgeComponent;\n  }));\n};\nexport var health = function health(item, __, _, _health) {\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_Health_' + item.namespace + '_' + item.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 5\n    }\n  }, _health && /*#__PURE__*/React.createElement(HealthIndicator, {\n    id: item.name,\n    health: _health,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 18\n    }\n  }));\n};\nexport var workloadType = function workloadType(item) {\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_WorkloadType_' + item.namespace + '_' + item.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 5\n    }\n  }, item.type);\n};\nexport var istioType = function istioType(item) {\n  var type = item.type;\n  var object = IstioTypes[type];\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_IstioType_' + item.namespace + '_' + item.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 5\n    }\n  }, object.name);\n};\nexport var istioConfiguration = function istioConfiguration(item, config) {\n  var validation = item.validation;\n  var linkQuery = item['type'] ? 'list=yaml' : '';\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_Conf_' + item.namespace + '_' + item.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 5\n    }\n  }, validation ? /*#__PURE__*/React.createElement(Link, {\n    to: \"\".concat(getLink(item, config, linkQuery)),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ValidationObjectSummary, {\n    id: item.name + '-config-validation',\n    validations: [validation],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 11\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, \"N/A\"));\n};\nexport var serviceConfiguration = function serviceConfiguration(item, config) {\n  var validation = item.validation;\n  var linkQuery = item['type'] ? 'list=yaml' : '';\n  return /*#__PURE__*/React.createElement(\"td\", {\n    role: \"gridcell\",\n    key: 'VirtuaItem_Conf_' + item.namespace + '_' + item.name,\n    style: {\n      verticalAlign: 'middle'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 5\n    }\n  }, validation ? /*#__PURE__*/React.createElement(Link, {\n    to: \"\".concat(getLink(item, config, linkQuery)),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ValidationServiceSummary, {\n    id: item.name + '-service-validation',\n    validations: [validation],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 11\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, \"N/A\"));\n};","map":{"version":3,"sources":["/root/kiali-ui/src/components/VirtualList/Renderers.tsx"],"names":["React","Link","Badge","Tooltip","TooltipPosition","FilterHelper","appLabelFilter","versionLabelFilter","MissingSidecar","hasMissingSidecar","IstioTypes","HealthIndicator","ValidationObjectSummary","ValidationServiceSummary","PFColors","renderAPILogo","NamespaceMTLSStatusContainer","ValidationSummary","OverviewCardContentExpanded","OverviewToolbar","IstioObjectLink","GetIstioObjectUrl","labelFilter","NsLabelFilter","ValidationSummaryLink","PFBadge","PFBadges","MissingLabel","getLink","item","config","query","url","name","getIstioLink","namespace","type","actionRenderer","key","action","verticalAlign","details","hasMissingSC","isWorkload","hasMissingApp","hasMissingVersion","additionalDetails","additionalDetailSample","spacer","icon","whiteSpace","title","istioReferences","length","map","ir","objectType","top","toLowerCase","tls","ns","tlsStatus","status","undefined","istioConfig","validations","objectCount","errors","warnings","currentDuration","currentOverviewType","metrics","errorMetrics","nsItem","_config","badge","Namespace","labelActivate","filters","value","id","some","filter","includes","split","k","v","val","vl","trim","startsWith","labels","_","__","___","statefulFilter","path","window","location","pathname","substr","lastIndexOf","labelFilt","getFiltersFromURL","Object","entries","label","labelAct","isExactlyLabelFilter","f","badgeComponent","backgroundColor","cursor","current","removeFilter","filterAdded","health","workloadType","istioType","object","istioConfiguration","validation","linkQuery","serviceConfiguration"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Badge, Tooltip, TooltipPosition } from '@patternfly/react-core';\nimport * as FilterHelper from '../FilterList/FilterHelper';\nimport { appLabelFilter, versionLabelFilter } from '../../pages/WorkloadList/FiltersAndSorts';\n\nimport MissingSidecar from '../MissingSidecar/MissingSidecar';\nimport { hasMissingSidecar, IstioTypes, Renderer, Resource, SortResource, TResource } from './Config';\nimport { HealthIndicator } from '../Health/HealthIndicator';\nimport { ValidationObjectSummary } from '../Validations/ValidationObjectSummary';\nimport { ValidationServiceSummary } from '../Validations/ValidationServiceSummary';\nimport { WorkloadListItem } from '../../types/Workload';\nimport { IstioConfigItem } from '../../types/IstioConfigList';\nimport { AppListItem } from '../../types/AppList';\nimport { ServiceListItem } from '../../types/ServiceList';\nimport { ActiveFilter } from '../../types/Filters';\nimport { PFColors } from '../Pf/PfColors';\nimport { renderAPILogo } from '../Logo/Logos';\nimport { Health } from '../../types/Health';\nimport NamespaceInfo from '../../pages/Overview/NamespaceInfo';\nimport NamespaceMTLSStatusContainer from '../MTls/NamespaceMTLSStatus';\nimport ValidationSummary from '../Validations/ValidationSummary';\nimport OverviewCardContentExpanded from '../../pages/Overview/OverviewCardContentExpanded';\nimport { OverviewToolbar } from '../../pages/Overview/OverviewToolbar';\nimport { StatefulFilters } from '../Filters/StatefulFilters';\nimport IstioObjectLink, { GetIstioObjectUrl } from '../Link/IstioObjectLink';\nimport { labelFilter } from 'components/Filters/CommonFilters';\nimport { labelFilter as NsLabelFilter } from '../../pages/Overview/Filters';\nimport ValidationSummaryLink from '../Link/ValidationSummaryLink';\nimport { ValidationStatus } from '../../types/IstioObjects';\nimport { PFBadgeType, PFBadge, PFBadges } from 'components/Pf/PfBadges';\nimport MissingLabel from '../MissingLabel/MissingLabel';\n\n// Links\n\nconst getLink = (item: TResource, config: Resource, query?: string) => {\n  let url = config.name === 'istio' ? getIstioLink(item) : `/namespaces/${item.namespace}/${config.name}/${item.name}`;\n  return query ? url + '?' + query : url;\n};\n\nconst getIstioLink = (item: TResource) => {\n  const type = item['type'];\n\n  return GetIstioObjectUrl(item.name, item.namespace, type);\n};\n\n// Cells\n\nexport const actionRenderer = (key: string, action: JSX.Element) => {\n  return (\n    <td role=\"gridcell\" key={'VirtuaItem_Action_' + key} style={{ verticalAlign: 'middle' }}>\n      {action}\n    </td>\n  );\n};\n\nexport const details: Renderer<AppListItem | WorkloadListItem | ServiceListItem> = (\n  item: AppListItem | WorkloadListItem | ServiceListItem\n) => {\n  const hasMissingSC = hasMissingSidecar(item);\n  const isWorkload = 'appLabel' in item;\n  const hasMissingApp = isWorkload && !item['appLabel'];\n  const hasMissingVersion = isWorkload && !item['versionLabel'];\n  const additionalDetails = (item as WorkloadListItem | ServiceListItem).additionalDetailSample;\n  const spacer = hasMissingSC && additionalDetails && additionalDetails.icon;\n\n  return (\n    <td\n      role=\"gridcell\"\n      key={'VirtuaItem_Details_' + item.namespace + '_' + item.name}\n      style={{ verticalAlign: 'middle', whiteSpace: 'nowrap' }}\n    >\n      <ul>\n        {hasMissingSC && (\n          <li>\n            <MissingSidecar namespace={item.namespace} />\n          </li>\n        )}\n        {isWorkload && (hasMissingApp || hasMissingVersion) && (\n          <MissingLabel missingApp={hasMissingApp} missingVersion={hasMissingVersion} tooltip={false} />\n        )}\n        {spacer && ' '}\n        {additionalDetails && additionalDetails.icon && (\n          <li>{renderAPILogo(additionalDetails.icon, additionalDetails.title, 0)}</li>\n        )}\n        {item.istioReferences &&\n          item.istioReferences.length > 0 &&\n          item.istioReferences.map(ir => (\n            <li>\n              <PFBadge badge={PFBadges[ir.objectType]} position={TooltipPosition.top} />\n              <IstioObjectLink name={ir.name} namespace={item.namespace || ''} type={ir.objectType.toLowerCase()}>\n                {ir.name}\n              </IstioObjectLink>\n            </li>\n          ))}\n      </ul>\n    </td>\n  );\n};\n\nexport const tls: Renderer<NamespaceInfo> = (ns: NamespaceInfo) => {\n  return (\n    <td role=\"gridcell\" key={'VirtualItem_tls_' + ns.name} style={{ verticalAlign: 'middle' }}>\n      {ns.tlsStatus ? <NamespaceMTLSStatusContainer status={ns.tlsStatus.status} /> : undefined}\n    </td>\n  );\n};\n\nexport const istioConfig: Renderer<NamespaceInfo> = (ns: NamespaceInfo) => {\n  let validations: ValidationStatus = { objectCount: 0, errors: 0, warnings: 0 };\n  if (!!ns.validations) {\n    validations = ns.validations;\n  }\n  const status = (\n    <td role=\"gridcell\" key={'VirtuaItem_IstioConfig_' + ns.name} style={{ verticalAlign: 'middle' }}>\n      <ValidationSummaryLink\n        namespace={ns.name}\n        objectCount={validations.objectCount}\n        errors={validations.errors}\n        warnings={validations.warnings}\n      >\n        <ValidationSummary\n          id={'ns-val-' + ns.name}\n          errors={validations.errors}\n          warnings={validations.warnings}\n          objectCount={validations.objectCount}\n        />\n      </ValidationSummaryLink>\n    </td>\n  );\n  return status;\n};\n\nexport const status: Renderer<NamespaceInfo> = (ns: NamespaceInfo) => {\n  if (ns.status) {\n    return (\n      <td\n        role=\"gridcell\"\n        key={'VirtuaItem_Status_' + ns.name}\n        className=\"pf-m-center\"\n        style={{ verticalAlign: 'middle' }}\n      >\n        <OverviewCardContentExpanded\n          key={ns.name}\n          name={ns.name}\n          duration={FilterHelper.currentDuration()}\n          status={ns.status}\n          type={OverviewToolbar.currentOverviewType()}\n          metrics={ns.metrics}\n          errorMetrics={ns.errorMetrics}\n        />\n      </td>\n    );\n  }\n  return <td role=\"gridcell\" key={'VirtuaItem_Status_' + ns.name} />;\n};\n\nexport const nsItem: Renderer<NamespaceInfo> = (ns: NamespaceInfo, _config: Resource, badge: PFBadgeType) => {\n  return (\n    <td role=\"gridcell\" key={'VirtuaItem_NamespaceItem_' + ns.name} style={{ verticalAlign: 'middle' }}>\n      <PFBadge badge={badge} />\n      {ns.name}\n    </td>\n  );\n};\n\nexport const item: Renderer<TResource> = (item: TResource, config: Resource, badge: PFBadgeType) => {\n  const key = 'link_definition_' + config.name + '_' + item.namespace + '_' + item.name;\n  return (\n    <td role=\"gridcell\" key={'VirtuaItem_Item_' + item.namespace + '_' + item.name} style={{ verticalAlign: 'middle' }}>\n      <PFBadge badge={badge} position={TooltipPosition.top} />\n      <Link key={key} to={getLink(item, config)} className={'virtualitem_definition_link'}>\n        {item.name}\n      </Link>\n    </td>\n  );\n};\n\nexport const namespace: Renderer<TResource> = (item: TResource) => {\n  return (\n    <td\n      role=\"gridcell\"\n      key={'VirtuaItem_Namespace_' + item.namespace + '_' + item.name}\n      style={{ verticalAlign: 'middle' }}\n    >\n      <PFBadge badge={PFBadges.Namespace} position={TooltipPosition.top} />\n      {item.namespace}\n    </td>\n  );\n};\n\nconst labelActivate = (filters: ActiveFilter[], key: string, value: string, id: string) => {\n  return filters.some(filter => {\n    if (filter.id === id) {\n      if (filter.value.includes(':')) {\n        const [k, v] = filter.value.split(':');\n        if (k === key) {\n          return v.split(',').some(val => value.split(',').some(vl => vl.trim().startsWith(val.trim())));\n        }\n        return false;\n      }\n      return key === filter.value;\n    } else {\n      if (filter.id === appLabelFilter.id) {\n        return filter.value === 'Present' && key === 'app';\n      }\n      return filter.value === 'Present' && key === 'version';\n    }\n  });\n};\n\nexport const labels: Renderer<SortResource | NamespaceInfo> = (\n  item: SortResource | NamespaceInfo,\n  _: Resource,\n  __: PFBadgeType,\n  ___?: Health,\n  statefulFilter?: React.RefObject<StatefulFilters>\n) => {\n  let path = window.location.pathname;\n  path = path.substr(path.lastIndexOf('/console') + '/console'.length + 1);\n  const labelFilt = path === 'overview' ? NsLabelFilter : labelFilter;\n  const filters = FilterHelper.getFiltersFromURL([labelFilt, appLabelFilter, versionLabelFilter]);\n  return (\n    <td\n      role=\"gridcell\"\n      key={'VirtuaItem_Labels_' + ('namespace' in item && `${item.namespace}_`) + item.name}\n      style={{ verticalAlign: 'middle' }}\n    >\n      {item.labels &&\n        Object.entries(item.labels).map(([key, value]) => {\n          const label = `${key}:${value}`;\n          const labelAct = labelActivate(filters.filters, key, value, labelFilt.id);\n          const isExactlyLabelFilter = FilterHelper.getFiltersFromURL([labelFilt]).filters.some(f =>\n            f.value.includes(label)\n          );\n          const badgeComponent = (\n            <Badge\n              key={`labelbadge_${key}_${value}_${item.name}`}\n              isRead={true}\n              style={{\n                backgroundColor: labelAct ? PFColors.Badge : undefined,\n                cursor: isExactlyLabelFilter || !labelAct ? 'pointer' : 'not-allowed',\n                whiteSpace: 'nowrap'\n              }}\n              onClick={() =>\n                statefulFilter\n                  ? labelAct\n                    ? isExactlyLabelFilter && statefulFilter.current!.removeFilter(labelFilt.id, label)\n                    : statefulFilter.current!.filterAdded(labelFilt, label)\n                  : {}\n              }\n            >\n              {key}: {value}\n            </Badge>\n          );\n\n          return statefulFilter ? (\n            <Tooltip\n              key={'Tooltip_Label_' + key + '_' + value}\n              content={\n                labelAct ? (\n                  isExactlyLabelFilter ? (\n                    <>Remove label from Filters</>\n                  ) : (\n                    <>Kiali can't remove the filter if is an expression</>\n                  )\n                ) : (\n                  <>Add label to Filters</>\n                )\n              }\n            >\n              {badgeComponent}\n            </Tooltip>\n          ) : (\n            badgeComponent\n          );\n        })}\n    </td>\n  );\n};\nexport const health: Renderer<TResource> = (item: TResource, __: Resource, _: PFBadgeType, health?: Health) => {\n  return (\n    <td\n      role=\"gridcell\"\n      key={'VirtuaItem_Health_' + item.namespace + '_' + item.name}\n      style={{ verticalAlign: 'middle' }}\n    >\n      {health && <HealthIndicator id={item.name} health={health} />}\n    </td>\n  );\n};\n\nexport const workloadType: Renderer<WorkloadListItem> = (item: WorkloadListItem) => {\n  return (\n    <td\n      role=\"gridcell\"\n      key={'VirtuaItem_WorkloadType_' + item.namespace + '_' + item.name}\n      style={{ verticalAlign: 'middle' }}\n    >\n      {item.type}\n    </td>\n  );\n};\n\nexport const istioType: Renderer<IstioConfigItem> = (item: IstioConfigItem) => {\n  const type = item.type;\n  const object = IstioTypes[type];\n  return (\n    <td\n      role=\"gridcell\"\n      key={'VirtuaItem_IstioType_' + item.namespace + '_' + item.name}\n      style={{ verticalAlign: 'middle' }}\n    >\n      {object.name}\n    </td>\n  );\n};\n\nexport const istioConfiguration: Renderer<IstioConfigItem> = (item: IstioConfigItem, config: Resource) => {\n  const validation = item.validation;\n  const linkQuery: string = item['type'] ? 'list=yaml' : '';\n  return (\n    <td role=\"gridcell\" key={'VirtuaItem_Conf_' + item.namespace + '_' + item.name} style={{ verticalAlign: 'middle' }}>\n      {validation ? (\n        <Link to={`${getLink(item, config, linkQuery)}`}>\n          <ValidationObjectSummary id={item.name + '-config-validation'} validations={[validation]} />\n        </Link>\n      ) : (\n        <>N/A</>\n      )}\n    </td>\n  );\n};\n\nexport const serviceConfiguration: Renderer<ServiceListItem> = (item: ServiceListItem, config: Resource) => {\n  const validation = item.validation;\n  const linkQuery: string = item['type'] ? 'list=yaml' : '';\n  return (\n    <td role=\"gridcell\" key={'VirtuaItem_Conf_' + item.namespace + '_' + item.name} style={{ verticalAlign: 'middle' }}>\n      {validation ? (\n        <Link to={`${getLink(item, config, linkQuery)}`}>\n          <ValidationServiceSummary id={item.name + '-service-validation'} validations={[validation]} />\n        </Link>\n      ) : (\n        <>N/A</>\n      )}\n    </td>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}