{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar layout_1 = require(\"./layout\");\n\nvar D3StyleLayoutAdaptor = function (_super) {\n  __extends(D3StyleLayoutAdaptor, _super);\n\n  function D3StyleLayoutAdaptor() {\n    var _this = _super.call(this) || this;\n\n    _this.event = d3.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\n    var d3layout = _this;\n    var drag;\n\n    _this.drag = function () {\n      if (!drag) {\n        var drag = d3.behavior.drag().origin(layout_1.Layout.dragOrigin).on(\"dragstart.d3adaptor\", layout_1.Layout.dragStart).on(\"drag.d3adaptor\", function (d) {\n          layout_1.Layout.drag(d, d3.event);\n          d3layout.resume();\n        }).on(\"dragend.d3adaptor\", layout_1.Layout.dragEnd);\n      }\n\n      if (!arguments.length) return drag;\n      this.call(drag);\n    };\n\n    return _this;\n  }\n\n  D3StyleLayoutAdaptor.prototype.trigger = function (e) {\n    var d3event = {\n      type: layout_1.EventType[e.type],\n      alpha: e.alpha,\n      stress: e.stress\n    };\n    this.event[d3event.type](d3event);\n  };\n\n  D3StyleLayoutAdaptor.prototype.kick = function () {\n    var _this = this;\n\n    d3.timer(function () {\n      return _super.prototype.tick.call(_this);\n    });\n  };\n\n  D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\n    if (typeof eventType === 'string') {\n      this.event.on(eventType, listener);\n    } else {\n      this.event.on(layout_1.EventType[eventType], listener);\n    }\n\n    return this;\n  };\n\n  return D3StyleLayoutAdaptor;\n}(layout_1.Layout);\n\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;\n\nfunction d3adaptor() {\n  return new D3StyleLayoutAdaptor();\n}\n\nexports.d3adaptor = d3adaptor;","map":{"version":3,"sources":["../../WebCola/src/d3v3adaptor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AAGI,IAAA,oBAAA,GAAA,UAAA,MAAA,EAAA;AAA0C,EAAA,SAAA,CAAA,oBAAA,EAAA,MAAA,CAAA;;AAgBtC,WAAA,oBAAA,GAAA;AAAA,QAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADX;;AAfA,IAAA,KAAA,CAAA,KAAA,GAAQ,EAAE,CAAC,QAAH,CAAY,QAAA,CAAA,SAAA,CAAU,QAAA,CAAA,SAAA,CAAU,KAApB,CAAZ,EAAwC,QAAA,CAAA,SAAA,CAAU,QAAA,CAAA,SAAA,CAAU,IAApB,CAAxC,EAAmE,QAAA,CAAA,SAAA,CAAU,QAAA,CAAA,SAAA,CAAU,GAApB,CAAnE,CAAR;AAkBI,QAAI,QAAQ,GAAG,KAAf;AACA,QAAI,IAAJ;;AACA,IAAA,KAAI,CAAC,IAAL,GAAY,YAAA;AACR,UAAI,CAAC,IAAL,EAAW;AACP,YAAI,IAAI,GAAG,EAAE,CAAC,QAAH,CAAY,IAAZ,GACN,MADM,CACC,QAAA,CAAA,MAAA,CAAO,UADR,EAEN,EAFM,CAEH,qBAFG,EAEoB,QAAA,CAAA,MAAA,CAAO,SAF3B,EAGN,EAHM,CAGH,gBAHG,EAGe,UAAA,CAAA,EAAC;AACnB,UAAA,QAAA,CAAA,MAAA,CAAO,IAAP,CAAY,CAAZ,EAAoB,EAAE,CAAC,KAAvB;AACA,UAAA,QAAQ,CAAC,MAAT;AACH,SANM,EAON,EAPM,CAOH,mBAPG,EAOkB,QAAA,CAAA,MAAA,CAAO,OAPzB,CAAX;AAQH;;AAED,UAAI,CAAC,SAAS,CAAC,MAAf,EAAuB,OAAO,IAAP;AAGvB,WAEK,IAFL,CAEU,IAFV;AAGH,KAlBD;;;AAmBH;;AArCD,EAAA,oBAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,CAAR,EAAgB;AACZ,QAAI,OAAO,GAAG;AAAE,MAAA,IAAI,EAAE,QAAA,CAAA,SAAA,CAAU,CAAC,CAAC,IAAZ,CAAR;AAA2B,MAAA,KAAK,EAAE,CAAC,CAAC,KAApC;AAA2C,MAAA,MAAM,EAAE,CAAC,CAAC;AAArD,KAAd;AACA,SAAK,KAAL,CAAW,OAAO,CAAC,IAAnB,EAAyB,OAAzB;AACH,GAHD;;AAMA,EAAA,oBAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACI,IAAA,EAAE,CAAC,KAAH,CAAS,YAAA;AAAM,aAAA,MAAA,CAAA,SAAA,CAAM,IAAN,CAAU,IAAV,CAAA,KAAA,CAAA;AAAY,KAA3B;AACH,GAFD;;AAkCA,EAAA,oBAAA,CAAA,SAAA,CAAA,EAAA,GAAA,UAAG,SAAH,EAAkC,QAAlC,EAAsD;AAClD,QAAI,OAAO,SAAP,KAAqB,QAAzB,EAAmC;AAC/B,WAAK,KAAL,CAAW,EAAX,CAAc,SAAd,EAAyB,QAAzB;AACH,KAFD,MAEO;AACH,WAAK,KAAL,CAAW,EAAX,CAAc,QAAA,CAAA,SAAA,CAAU,SAAV,CAAd,EAAoC,QAApC;AACH;;AACD,WAAO,IAAP;AACH,GAPD;;AAQJ,SAAA,oBAAA;AAAC,CAnDD,CAA0C,QAAA,CAAA,MAA1C,CAAA;;AAAa,OAAA,CAAA,oBAAA,GAAA,oBAAA;;AAiEb,SAAgB,SAAhB,GAAyB;AACrB,SAAO,IAAI,oBAAJ,EAAP;AACH;;AAFD,OAAA,CAAA,SAAA,GAAA,SAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar layout_1 = require(\"./layout\");\r\nvar D3StyleLayoutAdaptor = (function (_super) {\r\n    __extends(D3StyleLayoutAdaptor, _super);\r\n    function D3StyleLayoutAdaptor() {\r\n        var _this = _super.call(this) || this;\r\n        _this.event = d3.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\r\n        var d3layout = _this;\r\n        var drag;\r\n        _this.drag = function () {\r\n            if (!drag) {\r\n                var drag = d3.behavior.drag()\r\n                    .origin(layout_1.Layout.dragOrigin)\r\n                    .on(\"dragstart.d3adaptor\", layout_1.Layout.dragStart)\r\n                    .on(\"drag.d3adaptor\", function (d) {\r\n                    layout_1.Layout.drag(d, d3.event);\r\n                    d3layout.resume();\r\n                })\r\n                    .on(\"dragend.d3adaptor\", layout_1.Layout.dragEnd);\r\n            }\r\n            if (!arguments.length)\r\n                return drag;\r\n            this\r\n                .call(drag);\r\n        };\r\n        return _this;\r\n    }\r\n    D3StyleLayoutAdaptor.prototype.trigger = function (e) {\r\n        var d3event = { type: layout_1.EventType[e.type], alpha: e.alpha, stress: e.stress };\r\n        this.event[d3event.type](d3event);\r\n    };\r\n    D3StyleLayoutAdaptor.prototype.kick = function () {\r\n        var _this = this;\r\n        d3.timer(function () { return _super.prototype.tick.call(_this); });\r\n    };\r\n    D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\r\n        if (typeof eventType === 'string') {\r\n            this.event.on(eventType, listener);\r\n        }\r\n        else {\r\n            this.event.on(layout_1.EventType[eventType], listener);\r\n        }\r\n        return this;\r\n    };\r\n    return D3StyleLayoutAdaptor;\r\n}(layout_1.Layout));\r\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;\r\nfunction d3adaptor() {\r\n    return new D3StyleLayoutAdaptor();\r\n}\r\nexports.d3adaptor = d3adaptor;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZDN2M2FkYXB0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9XZWJDb2xhL3NyYy9kM3YzYWRhcHRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFNQSxtQ0FBa0Q7QUFHOUM7SUFBMEMsd0NBQU07SUFnQjVDO1FBQUEsWUFDSSxpQkFBTyxTQXVCVjtRQXZDRCxXQUFLLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxrQkFBUyxDQUFDLGtCQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsa0JBQVMsQ0FBQyxrQkFBUyxDQUFDLElBQUksQ0FBQyxFQUFFLGtCQUFTLENBQUMsa0JBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBa0JqRyxJQUFJLFFBQVEsR0FBRyxLQUFJLENBQUM7UUFDcEIsSUFBSSxJQUFJLENBQUM7UUFDVCxLQUFJLENBQUMsSUFBSSxHQUFHO1lBQ1IsSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDUCxJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRTtxQkFDeEIsTUFBTSxDQUFDLGVBQU0sQ0FBQyxVQUFVLENBQUM7cUJBQ3pCLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxlQUFNLENBQUMsU0FBUyxDQUFDO3FCQUMzQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsVUFBQSxDQUFDO29CQUNuQixlQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBTyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQzlCLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDdEIsQ0FBQyxDQUFDO3FCQUNELEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxlQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDaEQ7WUFFRCxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU07Z0JBQUUsT0FBTyxJQUFJLENBQUM7WUFHbkMsSUFBSTtpQkFFQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEIsQ0FBQyxDQUFBOztJQUNMLENBQUM7SUFyQ0Qsc0NBQU8sR0FBUCxVQUFRLENBQVE7UUFDWixJQUFJLE9BQU8sR0FBRyxFQUFFLElBQUksRUFBRSxrQkFBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQzVFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFHRCxtQ0FBSSxHQUFKO1FBQUEsaUJBRUM7UUFERyxFQUFFLENBQUMsS0FBSyxDQUFDLGNBQU0sT0FBQSxpQkFBTSxJQUFJLFlBQUUsRUFBWixDQUFZLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBZ0NELGlDQUFFLEdBQUYsVUFBRyxTQUE2QixFQUFFLFFBQW9CO1FBQ2xELElBQUksT0FBTyxTQUFTLEtBQUssUUFBUSxFQUFFO1lBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQztTQUN0QzthQUFNO1lBQ0gsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsa0JBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztTQUNqRDtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFDTCwyQkFBQztBQUFELENBQUMsQUFuREQsQ0FBMEMsZUFBTSxHQW1EL0M7QUFuRFksb0RBQW9CO0FBaUVqQyxTQUFnQixTQUFTO0lBQ3JCLE9BQU8sSUFBSSxvQkFBb0IsRUFBRSxDQUFDO0FBQ3RDLENBQUM7QUFGRCw4QkFFQyJ9"]},"metadata":{},"sourceType":"script"}