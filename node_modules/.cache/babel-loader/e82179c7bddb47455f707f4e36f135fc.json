{"ast":null,"code":"import _toConsumableArray from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/kiali-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/root/kiali-ui/src/pages/WorkloadDetails/WorkloadDescription.tsx\";\nimport * as React from 'react';\nimport { Card, CardBody, CardHeader, Title, Tooltip, TooltipPosition } from '@patternfly/react-core';\nimport DetailDescription from '../../components/Details/DetailDescription';\nimport { style } from 'typestyle';\nimport Labels from '../../components/Label/Labels';\nimport LocalTime from '../../components/Time/LocalTime';\nimport { TextOrLink } from '../../components/TextOrLink';\nimport { renderAPILogo, renderRuntimeLogo } from '../../components/Logo/Logos';\nimport { KialiIcon } from '../../config/KialiIcon';\nimport { HealthIndicator } from '../../components/Health/HealthIndicator';\nimport { serverConfig } from '../../config';\nimport MissingSidecar from '../../components/MissingSidecar/MissingSidecar';\nimport { PFBadge, PFBadges } from '../../components/Pf/PfBadges';\nimport MissingLabel from '../../components/MissingLabel/MissingLabel';\nvar resourceListStyle = style({\n  margin: '0px 0 11px 0',\n  $nest: {\n    '& > ul > li > span': {\n      float: 'left',\n      width: '125px',\n      fontWeight: 700\n    }\n  }\n});\nvar iconStyle = style({\n  display: 'inline-block',\n  verticalAlign: '2px !important'\n});\nvar infoStyle = style({\n  margin: '0px 0px 2px 10px',\n  verticalAlign: '-5px !important'\n});\nvar healthIconStyle = style({\n  marginLeft: '10px',\n  verticalAlign: '-1px !important'\n});\n\nvar WorkloadDescription = /*#__PURE__*/function (_React$Component) {\n  _inherits(WorkloadDescription, _React$Component);\n\n  var _super = _createSuper(WorkloadDescription);\n\n  function WorkloadDescription() {\n    _classCallCheck(this, WorkloadDescription);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WorkloadDescription, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var workload = this.props.workload;\n      var apps = [];\n      var services = [];\n\n      if (workload) {\n        if (workload.labels[serverConfig.istioLabels.appLabelName]) {\n          apps.push(workload.labels[serverConfig.istioLabels.appLabelName]);\n        }\n\n        workload.services.forEach(function (s) {\n          return services.push(s.name);\n        });\n      }\n\n      var isTemplateLabels = workload && ['Deployment', 'ReplicaSet', 'ReplicationController', 'DeploymentConfig', 'StatefulSet'].indexOf(workload.type) >= 0;\n      var runtimes = ((workload === null || workload === void 0 ? void 0 : workload.runtimes) || []).map(function (r) {\n        return r.name;\n      }).filter(function (name) {\n        return name !== '';\n      });\n      var workloadProperties = workload ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        key: \"properties-list\",\n        className: resourceListStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        style: {\n          listStyleType: 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }\n      }, workload.istioInjectionAnnotation !== undefined && /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }\n      }, \"Istio Injection\"), String(workload.istioInjectionAnnotation)), /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }\n      }, \"Type\"), workload.type ? workload.type : 'N/A'), /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }\n      }, \"Created\"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'inline-block'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(LocalTime, {\n        time: workload.createdAt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }\n      }, \"Version\"), workload.resourceVersion), workload.additionalDetails.map(function (additionalItem, idx) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: 'additional-details-' + idx,\n          id: 'additional-details-' + idx,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 19\n          }\n        }, additionalItem.title), additionalItem.icon && renderAPILogo(additionalItem.icon, undefined, idx), /*#__PURE__*/React.createElement(TextOrLink, {\n          text: additionalItem.value,\n          urlTruncate: 64,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 19\n          }\n        }));\n      }), runtimes.length > 0 && /*#__PURE__*/React.createElement(\"li\", {\n        id: \"runtimes\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }\n      }, \"Runtimes\"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'inline-block'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      }, runtimes.map(function (rt, idx) {\n        return renderRuntimeLogo(rt, idx);\n      }).reduce(function (list, elem) {\n        return list.length > 0 ? [].concat(_toConsumableArray(list), [/*#__PURE__*/React.createElement(\"span\", {\n          key: \"sep\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 53\n          }\n        }, \" | \"), elem]) : [elem];\n      }, [])))))) : undefined;\n      return workload ? /*#__PURE__*/React.createElement(Card, {\n        id: 'WorkloadDescriptionCard',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Title, {\n        headingLevel: \"h5\",\n        size: \"lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        key: \"service-icon\",\n        className: iconStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(PFBadge, {\n        badge: PFBadges.Workload,\n        position: TooltipPosition.top,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 15\n        }\n      })), this.props.workload ? this.props.workload.name : 'Workload', workloadProperties ? /*#__PURE__*/React.createElement(Tooltip, {\n        position: TooltipPosition.right,\n        content: /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            textAlign: 'left'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 26\n          }\n        }, workloadProperties),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(KialiIcon.Info, {\n        className: infoStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }\n      })) : undefined, /*#__PURE__*/React.createElement(\"span\", {\n        className: healthIconStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(HealthIndicator, {\n        id: workload.name,\n        health: this.props.health,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 15\n        }\n      })), this.props.workload && !this.props.workload.istioSidecar && /*#__PURE__*/React.createElement(MissingSidecar, {\n        namespace: this.props.namespace,\n        tooltip: true,\n        style: {\n          marginLeft: '10px'\n        },\n        text: '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 15\n        }\n      }), this.props.workload && (!this.props.workload.appLabel || !this.props.workload.versionLabel) && /*#__PURE__*/React.createElement(MissingLabel, {\n        missingApp: !this.props.workload.appLabel,\n        missingVersion: !this.props.workload.versionLabel,\n        style: {\n          marginLeft: '10px'\n        },\n        tooltip: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 9\n        }\n      }, workload.labels && /*#__PURE__*/React.createElement(Labels, {\n        labels: workload.labels,\n        tooltipMessage: isTemplateLabels ? 'Labels defined on the Workload template' : undefined,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(DetailDescription, {\n        namespace: this.props.namespace,\n        apps: apps,\n        services: services,\n        health: this.props.health,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }\n      }))) : 'Loading';\n    }\n  }]);\n\n  return WorkloadDescription;\n}(React.Component);\n\nexport default WorkloadDescription;","map":{"version":3,"sources":["/root/kiali-ui/src/pages/WorkloadDetails/WorkloadDescription.tsx"],"names":["React","Card","CardBody","CardHeader","Title","Tooltip","TooltipPosition","DetailDescription","style","Labels","LocalTime","TextOrLink","renderAPILogo","renderRuntimeLogo","KialiIcon","HealthIndicator","serverConfig","MissingSidecar","PFBadge","PFBadges","MissingLabel","resourceListStyle","margin","$nest","float","width","fontWeight","iconStyle","display","verticalAlign","infoStyle","healthIconStyle","marginLeft","WorkloadDescription","workload","props","apps","services","labels","istioLabels","appLabelName","push","forEach","s","name","isTemplateLabels","indexOf","type","runtimes","map","r","filter","workloadProperties","listStyleType","istioInjectionAnnotation","undefined","String","createdAt","resourceVersion","additionalDetails","additionalItem","idx","title","icon","value","length","rt","reduce","list","elem","Workload","top","right","textAlign","health","istioSidecar","namespace","appLabel","versionLabel","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Workload } from '../../types/Workload';\nimport { Card, CardBody, CardHeader, Title, Tooltip, TooltipPosition } from '@patternfly/react-core';\nimport DetailDescription from '../../components/Details/DetailDescription';\nimport { style } from 'typestyle';\nimport Labels from '../../components/Label/Labels';\nimport LocalTime from '../../components/Time/LocalTime';\nimport { TextOrLink } from '../../components/TextOrLink';\nimport { renderAPILogo, renderRuntimeLogo } from '../../components/Logo/Logos';\nimport * as H from '../../types/Health';\nimport { KialiIcon } from '../../config/KialiIcon';\nimport { HealthIndicator } from '../../components/Health/HealthIndicator';\nimport { serverConfig } from '../../config';\nimport MissingSidecar from '../../components/MissingSidecar/MissingSidecar';\nimport { PFBadge, PFBadges } from '../../components/Pf/PfBadges';\nimport MissingLabel from '../../components/MissingLabel/MissingLabel';\n\ntype WorkloadDescriptionProps = {\n  workload?: Workload;\n  health?: H.Health;\n  namespace: string;\n};\n\nconst resourceListStyle = style({\n  margin: '0px 0 11px 0',\n  $nest: {\n    '& > ul > li > span': {\n      float: 'left',\n      width: '125px',\n      fontWeight: 700\n    }\n  }\n});\n\nconst iconStyle = style({\n  display: 'inline-block',\n  verticalAlign: '2px !important'\n});\n\nconst infoStyle = style({\n  margin: '0px 0px 2px 10px',\n  verticalAlign: '-5px !important'\n});\n\nconst healthIconStyle = style({\n  marginLeft: '10px',\n  verticalAlign: '-1px !important'\n});\n\nclass WorkloadDescription extends React.Component<WorkloadDescriptionProps> {\n  render() {\n    const workload = this.props.workload;\n    const apps: string[] = [];\n    const services: string[] = [];\n\n    if (workload) {\n      if (workload.labels[serverConfig.istioLabels.appLabelName]) {\n        apps.push(workload.labels[serverConfig.istioLabels.appLabelName]);\n      }\n      workload.services.forEach(s => services.push(s.name));\n    }\n\n    const isTemplateLabels =\n      workload &&\n      ['Deployment', 'ReplicaSet', 'ReplicationController', 'DeploymentConfig', 'StatefulSet'].indexOf(workload.type) >=\n        0;\n    const runtimes = (workload?.runtimes || []).map(r => r.name).filter(name => name !== '');\n\n    const workloadProperties = workload ? (\n      <>\n        <div key=\"properties-list\" className={resourceListStyle}>\n          <ul style={{ listStyleType: 'none' }}>\n            {workload.istioInjectionAnnotation !== undefined && (\n              <li>\n                <span>Istio Injection</span>\n                {String(workload.istioInjectionAnnotation)}\n              </li>\n            )}\n            <li>\n              <span>Type</span>\n              {workload.type ? workload.type : 'N/A'}\n            </li>\n            <li>\n              <span>Created</span>\n              <div style={{ display: 'inline-block' }}>\n                <LocalTime time={workload.createdAt} />\n              </div>\n            </li>\n            <li>\n              <span>Version</span>\n              {workload.resourceVersion}\n            </li>\n            {workload.additionalDetails.map((additionalItem, idx) => {\n              return (\n                <li key={'additional-details-' + idx} id={'additional-details-' + idx}>\n                  <span>{additionalItem.title}</span>\n                  {additionalItem.icon && renderAPILogo(additionalItem.icon, undefined, idx)}\n                  <TextOrLink text={additionalItem.value} urlTruncate={64} />\n                </li>\n              );\n            })}\n            {runtimes.length > 0 && (\n              <li id=\"runtimes\">\n                <span>Runtimes</span>\n                <div style={{ display: 'inline-block' }}>\n                  {runtimes\n                    .map((rt, idx) => renderRuntimeLogo(rt, idx))\n                    .reduce(\n                      (list: JSX.Element[], elem) =>\n                        list.length > 0 ? [...list, <span key=\"sep\"> | </span>, elem] : [elem],\n                      []\n                    )}\n                </div>\n              </li>\n            )}\n          </ul>\n        </div>\n      </>\n    ) : undefined;\n\n    return workload ? (\n      <Card id={'WorkloadDescriptionCard'}>\n        <CardHeader>\n          <Title headingLevel=\"h5\" size=\"lg\">\n            <div key=\"service-icon\" className={iconStyle}>\n              <PFBadge badge={PFBadges.Workload} position={TooltipPosition.top} />\n            </div>\n            {this.props.workload ? this.props.workload.name : 'Workload'}\n            {workloadProperties ? (\n              <Tooltip\n                position={TooltipPosition.right}\n                content={<div style={{ textAlign: 'left' }}>{workloadProperties}</div>}\n              >\n                <KialiIcon.Info className={infoStyle} />\n              </Tooltip>\n            ) : undefined}\n            <span className={healthIconStyle}>\n              <HealthIndicator id={workload.name} health={this.props.health} />\n            </span>\n            {this.props.workload && !this.props.workload.istioSidecar && (\n              <MissingSidecar\n                namespace={this.props.namespace}\n                tooltip={true}\n                style={{ marginLeft: '10px' }}\n                text={''}\n              />\n            )}\n            {this.props.workload && (!this.props.workload.appLabel || !this.props.workload.versionLabel) && (\n              <MissingLabel\n                missingApp={!this.props.workload.appLabel}\n                missingVersion={!this.props.workload.versionLabel}\n                style={{ marginLeft: '10px' }}\n                tooltip={true}\n              />\n            )}\n          </Title>\n        </CardHeader>\n        <CardBody>\n          {workload.labels && (\n            <Labels\n              labels={workload.labels}\n              tooltipMessage={isTemplateLabels ? 'Labels defined on the Workload template' : undefined}\n            />\n          )}\n          <DetailDescription\n            namespace={this.props.namespace}\n            apps={apps}\n            services={services}\n            health={this.props.health}\n          />\n        </CardBody>\n      </Card>\n    ) : (\n      'Loading'\n    );\n  }\n}\n\nexport default WorkloadDescription;\n"]},"metadata":{},"sourceType":"module"}