{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Ticker from './ticker';\n\nvar Timeline = /*#__PURE__*/function () {\n  function Timeline() {\n    var _this = this;\n\n    _classCallCheck(this, Timeline);\n\n    this.children = [];\n    this.autoSleep = 200;\n    this.tickerKey = void 0;\n    this.startTime = void 0;\n\n    this.addChild = function (animate) {\n      if (_this.children.indexOf(animate) === -1) {\n        // this.children = this.children.filter(c => c !== animate);\n        _this.children.push(animate);\n\n        _this.updateTickerState();\n      } else {\n        _this.start();\n      }\n    };\n\n    this.removeChild = function (animate) {\n      _this.children = _this.children.filter(function (c) {\n        return c !== animate;\n      });\n\n      _this.updateTickerState();\n    };\n\n    this.kill = function (targets) {\n      _this.children = _this.children.filter(function (c) {\n        var currentTargets = c.root.targets;\n        var newTargets = currentTargets.map(function (d, i) {\n          if (targets.indexOf(d) === -1) {\n            return d;\n          } // c.root.vars = c.root.vars.filter((_: any, j: number) => j !== i);\n\n\n          delete d._tweenOneVars;\n          return;\n        });\n        c.root.targets = newTargets;\n        var v = !!newTargets.filter(function (a) {\n          return a;\n        }).length;\n\n        if (!v) {\n          c.kill();\n        }\n\n        return v;\n      });\n\n      _this.updateTickerState();\n    };\n\n    this.killAll = function (clearChild) {\n      if (clearChild) {\n        _this.children.forEach(function (c) {\n          c === null || c === void 0 ? void 0 : c.root.targets.forEach(function (d) {\n            if (!d) {\n              return;\n            }\n\n            delete d._tweenOneVars;\n          });\n        });\n\n        _this.children = [];\n      }\n\n      Ticker.clear(_this.tickerKey);\n      _this.tickerKey = undefined;\n    };\n\n    this.getTotalTime = function () {\n      var totalTime = 0;\n\n      for (var i = 0; i < _this.children.length; i++) {\n        var item = _this.children[i];\n        var itemTime = item.pausedState ? 0 : item.startTime + item.totalTime;\n\n        if (!totalTime) {\n          totalTime = itemTime;\n        } else {\n          totalTime = Math.max(itemTime, totalTime);\n        }\n      }\n\n      return totalTime;\n    };\n\n    this.updateTickerState = function () {\n      /**\n       * 暂停状态和播放完成状态不记入, 杀掉 ticker;\n       */\n      if (!_this.children.length || !_this.children.some(function (c) {\n        return !(c === null || c === void 0 ? void 0 : c.pausedState) && (!(c === null || c === void 0 ? void 0 : c.reverseState) && c.progressTime < c.totalTime || (c === null || c === void 0 ? void 0 : c.reverseState) && c.progressTime > 0);\n      })) {\n        _this.killAll(!_this.children.length);\n      } else {\n        _this.start();\n      }\n    };\n\n    this.start = function () {\n      if (!_this.tickerKey) {\n        _this.tickerKey = Ticker.add(_this.render);\n      }\n    };\n\n    this.render = function (_ref) {\n      var time = _ref.time,\n          _ref$elapsed = _ref.elapsed,\n          elapsed = _ref$elapsed === void 0 ? 0 : _ref$elapsed; // this.children.forEach(animate => {\n\n      var children = _this.children;\n      var length = children.length;\n\n      for (var i = 0; i < length; i++) {\n        var animate = children[i];\n\n        if (!animate) {\n          continue;\n        }\n\n        var startTime = animate.startTime - elapsed;\n        var totalTime = animate.startTime + animate.totalTime + elapsed;\n\n        if (time > startTime && time < totalTime && !animate.pausedState) {\n          animate.render({\n            time: time,\n            elapsed: elapsed\n          });\n        }\n      } // });\n\n    };\n  }\n\n  _createClass(Timeline, [{\n    key: \"totalTime\",\n    get: function get() {\n      return this.getTotalTime();\n    }\n  }]);\n\n  return Timeline;\n}();\n\nexport default Timeline;","map":{"version":3,"sources":["/root/GraduateProject/node_modules/tween-one/es/animate/timeline.js"],"names":["_classCallCheck","_createClass","Ticker","Timeline","_this","children","autoSleep","tickerKey","startTime","addChild","animate","indexOf","push","updateTickerState","start","removeChild","filter","c","kill","targets","currentTargets","root","newTargets","map","d","i","_tweenOneVars","v","a","length","killAll","clearChild","forEach","clear","undefined","getTotalTime","totalTime","item","itemTime","pausedState","Math","max","some","reverseState","progressTime","add","render","_ref","time","_ref$elapsed","elapsed","key","get"],"mappings":"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","sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Ticker from './ticker';\n\nvar Timeline = /*#__PURE__*/function () {\n  function Timeline() {\n    var _this = this;\n\n    _classCallCheck(this, Timeline);\n\n    this.children = [];\n    this.autoSleep = 200;\n    this.tickerKey = void 0;\n    this.startTime = void 0;\n\n    this.addChild = function (animate) {\n      if (_this.children.indexOf(animate) === -1) {\n        // this.children = this.children.filter(c => c !== animate);\n        _this.children.push(animate);\n\n        _this.updateTickerState();\n      } else {\n        _this.start();\n      }\n    };\n\n    this.removeChild = function (animate) {\n      _this.children = _this.children.filter(function (c) {\n        return c !== animate;\n      });\n\n      _this.updateTickerState();\n    };\n\n    this.kill = function (targets) {\n      _this.children = _this.children.filter(function (c) {\n        var currentTargets = c.root.targets;\n        var newTargets = currentTargets.map(function (d, i) {\n          if (targets.indexOf(d) === -1) {\n            return d;\n          } // c.root.vars = c.root.vars.filter((_: any, j: number) => j !== i);\n\n\n          delete d._tweenOneVars;\n          return;\n        });\n        c.root.targets = newTargets;\n        var v = !!newTargets.filter(function (a) {\n          return a;\n        }).length;\n\n        if (!v) {\n          c.kill();\n        }\n\n        return v;\n      });\n\n      _this.updateTickerState();\n    };\n\n    this.killAll = function (clearChild) {\n      if (clearChild) {\n        _this.children.forEach(function (c) {\n          c === null || c === void 0 ? void 0 : c.root.targets.forEach(function (d) {\n            if (!d) {\n              return;\n            }\n\n            delete d._tweenOneVars;\n          });\n        });\n\n        _this.children = [];\n      }\n\n      Ticker.clear(_this.tickerKey);\n      _this.tickerKey = undefined;\n    };\n\n    this.getTotalTime = function () {\n      var totalTime = 0;\n\n      for (var i = 0; i < _this.children.length; i++) {\n        var item = _this.children[i];\n        var itemTime = item.pausedState ? 0 : item.startTime + item.totalTime;\n\n        if (!totalTime) {\n          totalTime = itemTime;\n        } else {\n          totalTime = Math.max(itemTime, totalTime);\n        }\n      }\n\n      return totalTime;\n    };\n\n    this.updateTickerState = function () {\n      /**\n       * 暂停状态和播放完成状态不记入, 杀掉 ticker;\n       */\n      if (!_this.children.length || !_this.children.some(function (c) {\n        return !(c === null || c === void 0 ? void 0 : c.pausedState) && (!(c === null || c === void 0 ? void 0 : c.reverseState) && c.progressTime < c.totalTime || (c === null || c === void 0 ? void 0 : c.reverseState) && c.progressTime > 0);\n      })) {\n        _this.killAll(!_this.children.length);\n      } else {\n        _this.start();\n      }\n    };\n\n    this.start = function () {\n      if (!_this.tickerKey) {\n        _this.tickerKey = Ticker.add(_this.render);\n      }\n    };\n\n    this.render = function (_ref) {\n      var time = _ref.time,\n          _ref$elapsed = _ref.elapsed,\n          elapsed = _ref$elapsed === void 0 ? 0 : _ref$elapsed;\n      // this.children.forEach(animate => {\n      var children = _this.children;\n      var length = children.length;\n\n      for (var i = 0; i < length; i++) {\n        var animate = children[i];\n\n        if (!animate) {\n          continue;\n        }\n\n        var startTime = animate.startTime - elapsed;\n        var totalTime = animate.startTime + animate.totalTime + elapsed;\n\n        if (time > startTime && time < totalTime && !animate.pausedState) {\n          animate.render({\n            time: time,\n            elapsed: elapsed\n          });\n        }\n      } // });\n\n    };\n  }\n\n  _createClass(Timeline, [{\n    key: \"totalTime\",\n    get: function get() {\n      return this.getTotalTime();\n    }\n  }]);\n\n  return Timeline;\n}();\n\nexport default Timeline;"]},"metadata":{},"sourceType":"module"}