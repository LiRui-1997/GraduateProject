{"ast":null,"code":"import _classCallCheck from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/root/GraduateProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/root/GraduateProject/src/components/Tab/Tabs.tsx\";\nimport * as React from 'react';\nimport { Tabs } from '@patternfly/react-core';\nimport history from '../../app/History';\nexport var activeTab = function activeTab(tabName, defaultTab) {\n  return new URLSearchParams(history.location.search).get(tabName) || defaultTab;\n};\n\nvar ParameterizedTabs = /*#__PURE__*/function (_React$Component) {\n  _inherits(ParameterizedTabs, _React$Component);\n\n  var _super = _createSuper(ParameterizedTabs);\n\n  function ParameterizedTabs(props) {\n    var _this;\n\n    _classCallCheck(this, ParameterizedTabs);\n\n    _this = _super.call(this, props);\n    _this.indexMap = void 0;\n    _this.tabLinks = void 0;\n\n    _this.activeIndex = function () {\n      return _this.tabIndexOf(_this.props.activeTab);\n    };\n\n    _this.isLinkTab = function (index) {\n      return _this.tabLinks[index] != null;\n    };\n\n    _this.tabSelectHandler = function (tabKey) {\n      var urlParams = new URLSearchParams('');\n      urlParams.set(_this.props.tabName, tabKey);\n      history.push(history.location.pathname + '?' + urlParams.toString());\n\n      if (_this.props.postHandler) {\n        _this.props.postHandler(tabKey);\n      }\n\n      _this.setState({\n        currentTab: tabKey\n      });\n    };\n\n    _this.tabTransitionHandler = function (tabKey) {\n      var tabName = _this.tabNameOf(tabKey);\n\n      _this.tabSelectHandler(tabName);\n\n      _this.props.onSelect(tabName);\n    };\n\n    _this.indexMap = _this.buildIndexMap();\n    _this.tabLinks = _this.buildTabLinks();\n    return _this;\n  }\n\n  _createClass(ParameterizedTabs, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.indexMap = this.buildIndexMap();\n      this.tabLinks = this.buildTabLinks();\n    }\n  }, {\n    key: \"buildIndexMap\",\n    value: function buildIndexMap() {\n      var _this2 = this;\n\n      return Object.keys(this.props.tabMap).reduce(function (result, name) {\n        result[_this2.tabIndexOf(name)] = name;\n        return result;\n      }, {});\n    }\n  }, {\n    key: \"buildTabLinks\",\n    value: function buildTabLinks() {\n      var tabLinks = {};\n      React.Children.forEach(this.props.children, function (child) {\n        var childComp = child;\n\n        if (childComp.props.href) {\n          tabLinks[childComp.props.eventKey] = childComp.props.href;\n        }\n      });\n      return tabLinks;\n    }\n  }, {\n    key: \"tabIndexOf\",\n    value: function tabIndexOf(tabName) {\n      return this.props.tabMap[tabName];\n    }\n  }, {\n    key: \"tabNameOf\",\n    value: function tabNameOf(index) {\n      return this.indexMap[index];\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(Tabs, {\n        id: this.props.id,\n        activeKey: this.activeIndex(),\n        onSelect: function onSelect(_, ek) {\n          if (!_this3.isLinkTab(ek)) {\n            _this3.tabTransitionHandler(ek);\n          }\n        },\n        mountOnEnter: this.props.mountOnEnter === undefined ? true : this.props.mountOnEnter,\n        unmountOnExit: this.props.unmountOnExit === undefined ? true : this.props.unmountOnExit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }\n      }, this.props.children);\n    }\n  }]);\n\n  return ParameterizedTabs;\n}(React.Component);\n\nexport { ParameterizedTabs as default };","map":{"version":3,"sources":["/root/GraduateProject/src/components/Tab/Tabs.tsx"],"names":["React","Tabs","history","activeTab","tabName","defaultTab","URLSearchParams","location","search","get","ParameterizedTabs","props","indexMap","tabLinks","activeIndex","tabIndexOf","isLinkTab","index","tabSelectHandler","tabKey","urlParams","set","push","pathname","toString","postHandler","setState","currentTab","tabTransitionHandler","tabNameOf","onSelect","buildIndexMap","buildTabLinks","Object","keys","tabMap","reduce","result","name","Children","forEach","children","child","childComp","href","eventKey","id","_","ek","mountOnEnter","undefined","unmountOnExit","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { TabProps, Tabs } from '@patternfly/react-core';\nimport history from '../../app/History';\n\ntype TabsProps = {\n  activeTab: string;\n  defaultTab: string;\n  id: string;\n  mountOnEnter?: boolean;\n  onSelect: (tabName: string) => void;\n  postHandler?: (tabName: string) => void;\n  tabMap: { [key: string]: number };\n  tabName: string;\n  unmountOnExit?: boolean;\n};\n\nexport const activeTab = (tabName: string, defaultTab: string): string => {\n  return new URLSearchParams(history.location.search).get(tabName) || defaultTab;\n};\n\nexport default class ParameterizedTabs extends React.Component<TabsProps> {\n  private indexMap: { [key: number]: string };\n  private tabLinks: { [key: number]: string };\n\n  constructor(props: TabsProps) {\n    super(props);\n    this.indexMap = this.buildIndexMap();\n    this.tabLinks = this.buildTabLinks();\n  }\n\n  componentDidUpdate(): void {\n    this.indexMap = this.buildIndexMap();\n    this.tabLinks = this.buildTabLinks();\n  }\n\n  buildIndexMap() {\n    return Object.keys(this.props.tabMap).reduce((result: { [i: number]: string }, name: string) => {\n      result[this.tabIndexOf(name)] = name;\n      return result;\n    }, {});\n  }\n\n  buildTabLinks() {\n    const tabLinks: { [key: number]: string } = {};\n    React.Children.forEach(this.props.children, child => {\n      const childComp = child as React.ReactElement<TabProps>;\n\n      if (childComp.props.href) {\n        tabLinks[childComp.props.eventKey] = childComp.props.href;\n      }\n    });\n    return tabLinks;\n  }\n\n  tabIndexOf(tabName: string) {\n    return this.props.tabMap[tabName];\n  }\n\n  tabNameOf(index: number) {\n    return this.indexMap[index];\n  }\n\n  activeIndex = () => {\n    return this.tabIndexOf(this.props.activeTab);\n  };\n\n  isLinkTab = (index: number) => {\n    return this.tabLinks[index] != null;\n  };\n\n  tabSelectHandler = (tabKey: string) => {\n    const urlParams = new URLSearchParams('');\n    urlParams.set(this.props.tabName, tabKey);\n\n    history.push(history.location.pathname + '?' + urlParams.toString());\n\n    if (this.props.postHandler) {\n      this.props.postHandler(tabKey);\n    }\n\n    this.setState({\n      currentTab: tabKey\n    });\n  };\n\n  tabTransitionHandler = (tabKey: number) => {\n    const tabName = this.tabNameOf(tabKey);\n    this.tabSelectHandler(tabName);\n    this.props.onSelect(tabName);\n  };\n\n  render() {\n    return (\n      <Tabs\n        id={this.props.id}\n        activeKey={this.activeIndex()}\n        onSelect={(_, ek) => {\n          if (!this.isLinkTab(ek as number)) {\n            this.tabTransitionHandler(ek as number);\n          }\n        }}\n        mountOnEnter={this.props.mountOnEnter === undefined ? true : this.props.mountOnEnter}\n        unmountOnExit={this.props.unmountOnExit === undefined ? true : this.props.unmountOnExit}\n      >\n        {this.props.children}\n      </Tabs>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}